{
  "active": true,
  "connections": {
    "If": {
      "main": [
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Respond to Webhook7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "No Operation, do nothing": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code1": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "Code1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook1": {
      "main": [
        [
          {
            "node": "No Operation, do nothing",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "createdAt": "2025-07-28T16:17:18.782Z",
  "id": "5hWXKfT6UNEFv2SK",
  "isArchived": false,
  "meta": null,
  "name": "EPIC PWA",
  "nodes": [
    {
      "parameters": {
        "path": "powerpack",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        40,
        -180
      ],
      "id": "4646e8fa-ec99-41dd-8d9b-e01cc75f4f52",
      "name": "Webhook",
      "webhookId": "d7a536e5-2bbe-4a10-9edb-4b03806808aa"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "e3e9f22f-33a6-4254-931e-fd5542ec5a0d",
              "leftValue": "={{ $json.query.standalone }}",
              "rightValue": "yes",
              "operator": {
                "type": "string",
                "operation": "empty",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        160,
        0
      ],
      "id": "2eac8176-5116-4770-b6ea-1cbece6e993e",
      "name": "If"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Embedded Iframe with Zoom Disabled</title>\n  <!-- Prevent zooming via meta tag -->\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\">\n  <meta name=\"theme-color\" content=\"#000000\">\n  <!-- Apple-specific meta tags -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\">\n  \n  <style>\n    /* The container fills the viewport and clips any overflow */\n    .iframe-container {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      overflow: hidden;\n    }\n    /* The iframe dimensions */\n    .iframe-container iframe {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      border: none;\n      transform-origin: top left;\n    }\n  </style>\n  \n  <script src=\"https://cdn.jsdelivr.net/npm/keycloak-js@21.1.0/dist/keycloak.min.js\"></script>\n  \n  <script>\n    // Prevent double-tap zoom by intercepting touchend events.\n    let lastTouchEnd = 0;\n    document.addEventListener('touchend', function(event) {\n      const now = Date.now();\n      if (now - lastTouchEnd <= 300) {\n        event.preventDefault();\n      }\n      lastTouchEnd = now;\n    }, false);\n    \n    // Prevent pinch zoom by intercepting touchmove events.\n    document.addEventListener('touchmove', function(event) {\n      if (event.scale && event.scale !== 1) {\n        event.preventDefault();\n      }\n    }, { passive: false });\n\n    // Keycloak config\n    const KEYCLOAK_CONFIG = {\n      url: 'https://keycloak.cybertech.app',\n      realm: 'EPIC',\n      clientId: 'powerpack'\n    };\n\n    document.addEventListener('DOMContentLoaded', () => {\n      // Initialize Keycloak instance\n      const keycloak = new Keycloak(KEYCLOAK_CONFIG);\n\n      keycloak.init({ onLoad: 'login-required' }).then(authenticated => {\n        if (!authenticated) {\n          console.error('Failed to authenticate');\n          return;\n        }\n\n        const username = keycloak.tokenParsed?.preferred_username || 'unknown';\n\n        // Construct entity as \"EPIC/{realm}\"\n        const entity = `${KEYCLOAK_CONFIG.realm}/${KEYCLOAK_CONFIG.realm}`;\n\n        // Base URL updated as requested\n        const baseUrl = 'https://xl.epicpc.com/webhook/e225c70c-13d2-4902-bef9-977e3207b715';\n\n        const url = new URL(baseUrl);\n        url.searchParams.set('standalone', 'yes');\n        url.searchParams.set('entity', entity);\n        url.searchParams.set('user', username);\n\n        const iframeSrc = url.toString();\n\n        // Set iframe src dynamically\n        const iframe = document.querySelector('.iframe-container iframe');\n        iframe.src = iframeSrc;\n\n        console.log('Authenticated URL:', iframeSrc);\n      }).catch(err => {\n        console.error('Keycloak init error:', err);\n      });\n    });\n  </script>\n</head>\n<body>\n  <div class=\"iframe-container\">\n    <!-- iframe src set after Keycloak login -->\n    <iframe allow=\"accelerometer; ambient-light-sensor; autoplay; battery; camera; clipboard-read; clipboard-write; encrypted-media; fullscreen; geolocation; gyroscope; magnetometer; microphone; midi; payment; picture-in-picture; usb; xr-spatial-tracking;\">\n    </iframe>\n  </div>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        40,
        -360
      ],
      "id": "03eafca2-d3a3-4296-8bbe-b64709ad7092",
      "name": "Respond to Webhook7"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        340,
        400
      ],
      "id": "36be4dfa-17b4-47d6-981f-13f3b0256003",
      "name": "No Operation, do nothing"
    },
    {
      "parameters": {
        "jsCode": "// n8n Code node: This code outputs an HTML string with inline CSS/JS.\n// It dynamically uses incoming JSON with keys \"unlock\", \"ticket\", \"tools\", \n// \"iconunlock\", \"iconticket\", \"icontools\" to build three page contents.\n// All pages are preloaded into a tabbed view; only the active page is visible.\n// A single click on a nav button switches pages; a double click refreshes iframes in an already active page.\n// Additionally, a circular toggle enables drag mode (via a double tap) and collapses/expands the nav menu (via a single tap).\n// When the menu is collapsed, if the active menu item is pressed it fades away (its opacity transitions to 0)\n// but will be visible again if the menu is expanded.\n// Permissions for camera, microphone, geolocation, and fullscreen are enabled via a meta tag and by setting\n// the \"allow\" attribute on all iframes.\nconst inputData = items[0].json;\n\n// Map page content from incoming JSON.\nconst unlockContent = inputData.unlock || '<h1>Unlock</h1><p>Default Unlock Content</p>';\nconst ticketContent = inputData.ticket || '<h1>Ticket</h1><p>Default Ticket Content</p>';\nconst toolsContent = inputData.tools || '<h1>Tools</h1><p>Default Tools Content</p>';\n\n// Map icons using provided URLs (if available); otherwise, use default inline SVGs.\nconst unlockIcon = inputData.iconunlock && inputData.iconunlock.trim() !== \"\" \n  ? `<img src=\"${inputData.iconunlock}\" alt=\"Unlock Icon\" class=\"icon\" style=\"width:24px; height:24px; display:block; margin-bottom:4px;\">`\n  : `<svg class=\"icon\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n       <path d=\"M12 17a2 2 0 0 0 2-2v-4a2 2 0 0 0-4 0v4a2 2 0 0 0 2 2zm6-8h-1V7a5 5 0 0 0-10 0v2H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-9a2 2 0 0 0-2-2zM9 7a3 3 0 0 1 6 0v2H9V7z\"/>\n     </svg>`;\n\nconst ticketIcon = inputData.iconticket && inputData.iconticket.trim() !== \"\" \n  ? `<img src=\"${inputData.iconticket}\" alt=\"Ticket Icon\" class=\"icon\" style=\"width:24px; height:24px; display:block; margin-bottom:4px;\">`\n  : `<svg class=\"icon\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n       <path d=\"M2 21l21-9L11 2 2 21zm15-9.5l-1.5 1.5-2-2 1.5-1.5 2 2z\"/>\n     </svg>`;\n\nconst toolsIcon = inputData.icontools && inputData.icontools.trim() !== \"\" \n  ? `<img src=\"${inputData.icontools}\" alt=\"Tools Icon\" class=\"icon\" style=\"width:24px; height:24px; display:block; margin-bottom:4px;\">`\n  : `<svg class=\"icon\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n       <path d=\"M12 2a10 10 0 0 0-3.32 19.4l-1.66 1.66a1 1 0 0 0 1.41 1.41l1.66-1.66A10 10 0 1 0 12 2zm5 11h-2v2h-2v-2H9v-2h4V9h2v2h2v2z\"/>\n     </svg>`;\n\nreturn [\n  {\n    json: {\n      html: `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\" />\n  <!-- viewport-fit=cover for edge-to-edge display -->\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, viewport-fit=cover\">\n  <!-- Permissions Policy to allow camera, microphone, geolocation, and fullscreen -->\n  <meta http-equiv=\"Permissions-Policy\" content=\"camera=*, microphone=*, geolocation=*, fullscreen=*\">\n  <title>Tabbed View with Cached Pages & Enhanced Permissions</title>\n  <!-- Load canvas-confetti library for confetti effects -->\n  <script src=\"https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js\"></script>\n  <style>\n    :root {\n      --nav-height: 60px;\n      --default-offset: 40px;\n      --neon-color: #ff00ff; /* Cyber neon color */\n    }\n    body {\n      margin: 0;\n      font-family: Arial, sans-serif;\n      background-color: #f5f5f5;\n      min-height: 100vh;\n    }\n    /* Content area with three preloaded page containers */\n    #content {\n      padding: 20px;\n      box-sizing: border-box;\n    }\n    .page {\n      display: none;\n      min-height: calc(100vh - var(--nav-height));\n    }\n    .page.active {\n      display: block;\n    }\n    .bottom-nav {\n      position: fixed;\n      left: 0;\n      width: 100%;\n      height: var(--nav-height);\n      background-color: #333;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      z-index: 9999;\n      bottom: var(--default-offset);\n      transition: bottom 0.2s ease-out, background-color 0.2s ease-out;\n      touch-action: none;\n    }\n    .bottom-nav.collapsed {\n      background-color: transparent;\n    }\n    .nav-links {\n      display: flex;\n      flex: 1;\n      transition: opacity 0.2s ease-out;\n    }\n    /* In collapsed mode, only show the active menu item */\n    .bottom-nav.collapsed .nav-links a:not(.active) {\n      display: none;\n    }\n    /* Also hide the text label in collapsed mode */\n    .bottom-nav.collapsed .nav-links a.active span {\n      display: none;\n    }\n    .nav-links a {\n      flex: 1;\n      color: #fff;\n      text-align: center;\n      text-decoration: none;\n      transition: background-color 0.3s;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      font-size: 12px;\n      user-select: none;\n      cursor: pointer;\n      -webkit-tap-highlight-color: transparent;\n      outline: none;\n    }\n    /* Remove default focus and active background */\n    .nav-links a:active,\n    .nav-links a:focus {\n      background-color: transparent;\n      outline: none;\n    }\n    .nav-links a:hover {\n      background-color: #444;\n    }\n    /* Override hover for the active (selected) menu item so no grey change is shown */\n    .nav-links a.active:hover {\n      background-color: transparent;\n    }\n    /* Fade-out effect for active item when pressed in collapsed mode */\n    .nav-links a.faded {\n      opacity: 0;\n      transition: opacity 0.5s ease-out;\n    }\n    .icon {\n      width: 24px;\n      height: 24px;\n      margin-bottom: 4px;\n    }\n    /* Active icon neon effect */\n    .nav-links a.active .icon {\n      border: 2px solid var(--neon-color);\n      border-radius: 50%;\n      padding: 4px;\n      box-shadow: 0 0 8px 2px var(--neon-color);\n    }\n    /* Remove grey hover background in collapsed mode */\n    .bottom-nav.collapsed .nav-links a:hover {\n      background-color: transparent;\n    }\n    /* Toggle button styled as a circle.\n       The swap icon remains the same in all modes.\n    */\n    .drag-toggle {\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      background-color: #fff;\n      color: #333;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      user-select: none;\n      margin-right: 5px;\n      flex-shrink: 0;\n      transition: background-color 0.2s ease-out, color 0.2s ease-out;\n    }\n    .bottom-nav.drag-mode {\n      background-color: #FF5722;\n    }\n    .bottom-nav.drag-mode .drag-toggle {\n      background-color: #333;\n      color: #fff;\n    }\n  </style>\n</head>\n<body>\n  <!-- Content area with cached pages -->\n  <div id=\"content\">\n    <div id=\"page-home\" class=\"page active\">\n      ${unlockContent}\n    </div>\n    <div id=\"page-search\" class=\"page\">\n      ${ticketContent}\n    </div>\n    <div id=\"page-profile\" class=\"page\">\n      ${toolsContent}\n    </div>\n  </div>\n\n  <div class=\"bottom-nav\" id=\"bottomNav\">\n    <div class=\"nav-links\" id=\"navLinks\">\n      <a data-page=\"home\" id=\"btnUnlock\">\n        ${unlockIcon}\n        <span>Unlock</span>\n      </a>\n      <a data-page=\"search\" id=\"btnTicket\">\n        ${ticketIcon}\n        <span>Ticket</span>\n      </a>\n      <a data-page=\"profile\" id=\"btnTools\">\n        ${toolsIcon}\n        <span>Tools</span>\n      </a>\n    </div>\n    <div class=\"drag-toggle\" id=\"dragToggle\">\n      <!-- Swap icon (always the same) -->\n      <svg fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"20\" height=\"20\">\n        <path d=\"M8 5v4H5l4 4 4-4h-3V5H8zm8 14v-4h3l-4-4-4 4h3v4h2z\"/>\n      </svg>\n    </div>\n  </div>\n\n  <script>\n    // --- Cached Pages Setup ---\n    const pages = {\n      home: document.getElementById('page-home'),\n      search: document.getElementById('page-search'),\n      profile: document.getElementById('page-profile')\n    };\n    let currentPage = 'home'; // default active page\n\n    // Track collapsed state and move mode.\n    let menuCollapsed = false;\n    let dragEnabled = false;\n\n    // Timer for detecting double tap.\n    let toggleTapTimer = null;\n    const tapDelay = 300; // milliseconds\n\n    // Function to update the toggle icon (always the same swap icon).\n    function updateToggleIcon() {\n      document.getElementById('dragToggle').innerHTML =\n        '<svg fill=\"currentColor\" viewBox=\"0 0 24 24\" width=\"20\" height=\"20\">' +\n        '<path d=\"M8 5v4H5l4 4 4-4h-3V5H8zm8 14v-4h3l-4-4-4 4h3v4h2z\"/>' +\n        '</svg>';\n    }\n\n    function showPage(page) {\n      // Hide all pages, then show the selected page.\n      for (const key in pages) {\n        pages[key].classList.remove('active');\n      }\n      pages[page].classList.add('active');\n      currentPage = page;\n      // Ensure any iframes in the newly visible page have proper permissions.\n      applyIframePermissions();\n    }\n\n    // --- Refresh Iframes in a Given Page ---\n    function refreshIframes(page) {\n      const iframes = pages[page].querySelectorAll('iframe');\n      iframes.forEach(iframe => {\n        iframe.src = iframe.src;\n      });\n    }\n\n    // --- Apply Permissions to Iframes ---\n    function applyIframePermissions() {\n      document.querySelectorAll('#content iframe').forEach(iframe => {\n        iframe.setAttribute('allow', 'camera; microphone; geolocation; fullscreen');\n      });\n    }\n\n    // --- Cookie Helpers ---\n    function getCookie(name) {\n      const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));\n      return match ? match[2] : null;\n    }\n    function setCookie(name, value, days) {\n      let expires = \"\";\n      if (days) {\n        const date = new Date();\n        date.setTime(date.getTime() + (days*24*60*60*1000));\n        expires = \"; expires=\" + date.toUTCString();\n      }\n      document.cookie = name + \"=\" + value + expires + \"; path=/; Secure\";\n    }\n\n    // --- Navigation Button Events ---\n    const navButtons = document.querySelectorAll('.nav-links a');\n    navButtons.forEach(button => {\n      let lastTap = 0;\n      button.addEventListener('click', function(e) {\n        const now = Date.now();\n        const page = button.getAttribute('data-page');\n        // If the menu is collapsed and the active button is pressed, fade it away.\n        if (nav.classList.contains('collapsed') && button.classList.contains('active')) {\n          button.classList.add('faded');\n          return;\n        }\n        // Otherwise, handle tap timing.\n        if (now - lastTap >= 300) {\n          showPage(page);\n          document.querySelectorAll('.nav-links a').forEach(btn => btn.classList.remove('active'));\n          button.classList.add('active');\n          updateToggleIcon();\n        }\n        else if (now - lastTap < 300) {\n          if (page === currentPage) {\n            refreshIframes(page);\n          }\n        }\n        lastTap = now;\n      });\n    });\n\n    // --- Draggable Navbar & Toggle Button ---\n    const nav = document.getElementById('bottomNav');\n    const dragToggle = document.getElementById('dragToggle');\n    let dragging = false;\n    let startY = 0;\n    let startOffset = 0;\n\n    // Single click handler for the toggle that waits for a possible double tap.\n    dragToggle.addEventListener('click', function(e) {\n      e.stopPropagation();\n      if (toggleTapTimer === null) {\n        toggleTapTimer = setTimeout(function() {\n          // Timer expired: treat as single tap.\n          if (dragEnabled) {\n            // If in move mode, exit move mode.\n            dragEnabled = false;\n            nav.classList.remove('drag-mode');\n          } else {\n            // Otherwise toggle collapse state.\n            menuCollapsed = !menuCollapsed;\n            if (menuCollapsed) {\n              nav.classList.add('collapsed');\n            } else {\n              nav.classList.remove('collapsed');\n              // Restore any faded nav buttons when expanded.\n              document.querySelectorAll('.nav-links a').forEach(btn => btn.classList.remove('faded'));\n            }\n          }\n          updateToggleIcon();\n          toggleTapTimer = null;\n        }, tapDelay);\n      } else {\n        // Second tap detected: cancel single tap action.\n        clearTimeout(toggleTapTimer);\n        toggleTapTimer = null;\n        // Double tap action: toggle move (drag) mode.\n        dragEnabled = !dragEnabled;\n        if (dragEnabled) {\n          nav.classList.add('drag-mode');\n        } else {\n          nav.classList.remove('drag-mode');\n        }\n      }\n    });\n\n    // Pointer events for dragging the nav bar when move mode is enabled.\n    nav.addEventListener('pointerdown', function(e) {\n      if (!dragEnabled) return;\n      startY = e.clientY;\n      startOffset = parseInt(nav.style.bottom) || parseInt(getComputedStyle(nav).bottom);\n      dragging = true;\n    });\n    nav.addEventListener('pointermove', function(e) {\n      if (!dragEnabled || !dragging) return;\n      const currentY = e.clientY;\n      const delta = startY - currentY;\n      const newOffset = startOffset + delta;\n      nav.style.bottom = newOffset + \"px\";\n      e.preventDefault();\n    });\n    nav.addEventListener('pointerup', function(e) {\n      if (!dragEnabled || !dragging) return;\n      dragging = false;\n      localStorage.setItem('navBarOffset', nav.style.bottom);\n      setCookie('navBarOffset', nav.style.bottom, 30);\n    });\n    nav.addEventListener('pointercancel', function(e) {\n      if (!dragEnabled || !dragging) return;\n      dragging = false;\n    });\n\n    // --- Initialization ---\n    function initNavBarPosition() {\n      let savedOffset = localStorage.getItem('navBarOffset');\n      if (!savedOffset) {\n        savedOffset = getCookie('navBarOffset');\n      }\n      if (savedOffset !== null) {\n        nav.style.bottom = savedOffset;\n      } else {\n        nav.style.bottom = \"var(--default-offset)\";\n      }\n    }\n    initNavBarPosition();\n    // Apply permissions to any iframes on initial load.\n    applyIframePermissions();\n\n    // --- Shake Detection for Confetti (3 discrete shakes) ---\n    const shakeThreshold = 15; // Acceleration threshold.\n    let shakeCount = 0;\n    let isShaking = false;\n    let lastShakeTime = 0;\n    const shakeResetTimeout = 3000; // Reset shake count if no shake within 3 seconds.\n\n    function handleShake(event) {\n      const acc = event.accelerationIncludingGravity;\n      if (!acc) return;\n      const totalAcc = Math.sqrt(acc.x * acc.x + acc.y * acc.y + acc.z * acc.z);\n      const now = Date.now();\n\n      // Reset count if enough time has passed since the last shake.\n      if (now - lastShakeTime > shakeResetTimeout) {\n        shakeCount = 0;\n      }\n      if (totalAcc > shakeThreshold) {\n        if (!isShaking) {\n          isShaking = true;\n          shakeCount++;\n          lastShakeTime = now;\n          if (shakeCount >= 3) {\n            triggerConfetti();\n            shakeCount = 0;\n          }\n        }\n      } else {\n        isShaking = false;\n      }\n    }\n\n    function triggerConfetti() {\n      // Explode confetti using canvas-confetti.\n      confetti({\n        particleCount: 100,\n        spread: 70,\n        origin: { y: 0.6 }\n      });\n    }\n\n    // Request permission for motion events on iOS 13+.\n    if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {\n      DeviceMotionEvent.requestPermission()\n      .then(permissionState => {\n        if (permissionState === 'granted') {\n          window.addEventListener('devicemotion', handleShake, false);\n        }\n      })\n      .catch(console.error);\n    } else {\n      window.addEventListener('devicemotion', handleShake, false);\n    }\n  </script>\n</body>\n</html>\n      `\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        860,
        400
      ],
      "id": "e8ad84ed-377c-4276-b781-aac48d460124",
      "name": "Code1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "bbd7a644-70bb-4298-89e5-0589d29f98d6",
              "name": "unlock",
              "value": "=<iframe src=\"https://n8n.cybertech.app/webhook/9d31760d-8307-48e0-a534-52b396d1d8f2?user=tstilwell%40epichs.org&role=Nuwell\" style=\"position: fixed; top: 0; left: 0; width: 100%; height: 100%; border: none; overflow: hidden;\" allow=\"camera; microphone;\"></iframe>",
              "type": "string"
            },
            {
              "id": "5b039444-93d1-405b-a7c8-c00b43b012f7",
              "name": "iconunlock",
              "value": "https://file.cybertech.app/CyberTech/PWA/NIT/icons8-lock-48%20(1).png",
              "type": "string"
            },
            {
              "id": "19b2f8ce-b3b3-4b6c-9ba0-8e9fc7fdaa95",
              "name": "ticket",
              "value": "=<iframe src=\"https://xl.epicpc.com/webhook/514a4954-d74e-4183-9694-94d76671c483?user=tstilwell%40epichs.org&role=Nuwell\" style=\"position: fixed; top: 0; left: 0; width: 100%; height: 100%; border: none; overflow: hidden;\" allow=\"camera; microphone;\"></iframe>",
              "type": "string"
            },
            {
              "id": "90a9c8f6-abbe-4300-abf1-89b50f533489",
              "name": "iconticket",
              "value": "https://file.cybertech.app/CyberTech/PWA/NIT/icons8-rocket-24.png",
              "type": "string"
            },
            {
              "id": "bee9d37f-8f52-4eee-85d7-043d9d84cc40",
              "name": "tools",
              "value": "=<iframe src=\"https://xl.epicpc.com/webhook/a43dadf7-5f56-42c0-b7a1-241bc6901507?user=tstilwell\" style=\"position: fixed; top: 0; left: 0; width: 100%; height: 100%; border: none; overflow: hidden;\" allow=\"camera; microphone;\"></iframe>",
              "type": "string"
            },
            {
              "id": "7905b8fe-7484-4880-8cf9-78af413172d9",
              "name": "icontools",
              "value": "https://file.cybertech.app/CyberTech/PWA/NIT/icons8-gps-signal-24.png",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        600,
        400
      ],
      "id": "d10c1d20-4643-4e20-8cb9-09528b450c96",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "path": "e225c70c-13d2-4902-bef9-977e3207b715",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        60,
        400
      ],
      "id": "40c6ba00-c089-4570-b706-4209cf020d4d",
      "name": "Webhook1",
      "webhookId": "e225c70c-13d2-4902-bef9-977e3207b715"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "={{ $json.html }}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        1140,
        400
      ],
      "id": "916522fa-97f3-42b5-a737-d6a5ae621a98",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>EPIC Power Pack</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <meta name=\"theme-color\" content=\"#000000\" />\n\n  <!-- Windows compatibility meta tags -->\n  <meta name=\"msapplication-TileColor\" content=\"#000000\" />\n  <meta\n    name=\"msapplication-TileImage\"\n    content=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\"\n  />\n\n  <!-- Apple-specific meta tags for native-like appearance -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n  <meta name=\"apple-mobile-web-app-title\" content=\"EPIC Power Pack\" />\n  <link\n    rel=\"apple-touch-icon\"\n    href=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\"\n  />\n\n  <!-- Use a more readable font -->\n  <link\n    href=\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\"\n    rel=\"stylesheet\"\n  />\n\n  <!-- Early redirect: if running standalone, redirect to webhook with standalone=yes -->\n  <script>\n    if (\n      window.matchMedia(\"(display-mode: standalone)\").matches ||\n      window.navigator.standalone === true\n    ) {\n      window.location.href =\n        \"https://xl.epicpc.com/webhook/e225c70c-13d2-4902-bef9-977e3207b715?standalone=yes\";\n    }\n  </script>\n\n  <script>\n    let deferredPrompt = null;\n\n    // Helper functions\n    function isIos() {\n      const ua = window.navigator.userAgent.toLowerCase();\n      return /iphone|ipad|ipod/.test(ua);\n    }\n\n    function isInStandaloneMode() {\n      return (\n        (\"standalone\" in window.navigator && window.navigator.standalone) ||\n        window.matchMedia(\"(display-mode: standalone)\").matches\n      );\n    }\n\n    // Add manifest dynamically\n    const manifestData = {\n      name: \"EPIC Power Pack\",\n      short_name: \"PowerPack\",\n      start_url: \".\",\n      display: \"standalone\",\n      background_color: \"#ffffff\",\n      theme_color: \"#000000\",\n      icons: [\n        {\n          src:\n            \"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\",\n          sizes: \"512x512\",\n          type: \"image/png\",\n        },\n      ],\n    };\n    const manifestBlob = new Blob([JSON.stringify(manifestData)], {\n      type: \"application/json\",\n    });\n    const manifestURL = URL.createObjectURL(manifestBlob);\n    const manifestLink = document.createElement(\"link\");\n    manifestLink.rel = \"manifest\";\n    manifestLink.href = manifestURL;\n    document.head.appendChild(manifestLink);\n\n    // Service worker registration\n    if (\"serviceWorker\" in navigator) {\n      const swCode = `\n        self.addEventListener('install', event => {\n          console.log('Service Worker: Installed');\n          self.skipWaiting();\n        });\n        self.addEventListener('activate', event => {\n          console.log('Service Worker: Activated');\n        });\n      `;\n      const blob = new Blob([swCode], { type: \"text/javascript\" });\n      const swURL = URL.createObjectURL(blob);\n      navigator.serviceWorker\n        .register(swURL)\n        .then((reg) => console.log(\"Service Worker registered with scope:\", reg.scope))\n        .catch((err) => console.error(\"Service Worker registration failed:\", err));\n    }\n\n    // Listen for beforeinstallprompt on supported platforms\n    window.addEventListener(\"beforeinstallprompt\", (e) => {\n      e.preventDefault();\n      deferredPrompt = e;\n      if (window.innerWidth <= 768) {\n        document.getElementById(\"installBtnMobile\").style.display = \"inline-flex\";\n      } else {\n        document.getElementById(\"installBtnWindows\").style.display = \"inline-flex\";\n      }\n    });\n\n    // Show prompt or modal after load\n    window.addEventListener(\"load\", () => {\n      if (isIos() && !isInStandaloneMode()) {\n        setTimeout(() => {\n          document.getElementById(\"iosInstallModal\").style.display = \"flex\";\n        }, 1000);\n      } else if (deferredPrompt) {\n        if (window.innerWidth <= 768) {\n          document.getElementById(\"installBtnMobile\").style.display = \"inline-flex\";\n        } else {\n          document.getElementById(\"installBtnWindows\").style.display = \"inline-flex\";\n        }\n      }\n    });\n\n    // Handle install button clicks\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      document.querySelectorAll(\".button-fancy\").forEach((button) => {\n        button.addEventListener(\"click\", async () => {\n          if (isIos() && !isInStandaloneMode()) {\n            document.getElementById(\"iosInstallModal\").style.display = \"flex\";\n          } else if (deferredPrompt) {\n            deferredPrompt.prompt();\n            const { outcome } = await deferredPrompt.userChoice;\n            console.log(\"User response to install prompt:\", outcome);\n            deferredPrompt = null;\n            // Hide buttons after prompt\n            document.getElementById(\"installBtnMobile\").style.display = \"none\";\n            document.getElementById(\"installBtnWindows\").style.display = \"none\";\n          }\n        });\n      });\n    });\n\n    function closeIosModal() {\n      document.getElementById(\"iosInstallModal\").style.display = \"none\";\n    }\n  </script>\n\n  <style>\n    body {\n      margin: 0;\n      padding: 0;\n      background: url(\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\")\n        no-repeat center center fixed;\n      background-size: cover;\n      font-family: \"Roboto\", sans-serif;\n      color: #fff;\n    }\n\n    .overlay {\n      background-color: rgba(0, 0, 0, 0.5);\n      padding: 30px;\n      margin: 50px auto;\n      width: 90%;\n      max-width: 600px;\n      border-radius: 10px;\n      text-align: center;\n    }\n\n    h1 {\n      margin-bottom: 0.3em;\n      font-size: 2em;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n\n    h2 {\n      margin-top: 0;\n      margin-bottom: 1em;\n      font-size: 1.2em;\n      font-weight: normal;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n\n    .button-fancy {\n      display: none;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      margin: 10px auto;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: #111;\n      border: 2px solid #0ff;\n      cursor: pointer;\n      box-shadow: 0 0 10px #0ff;\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n      position: relative;\n      overflow: hidden;\n      animation: pulse 2s infinite;\n    }\n\n    @keyframes pulse {\n      0% {\n        box-shadow: 0 0 10px #0ff;\n      }\n      50% {\n        box-shadow: 0 0 20px #0ff;\n      }\n      100% {\n        box-shadow: 0 0 10px #0ff;\n      }\n    }\n\n    .button-fancy:hover {\n      box-shadow: 0 0 30px #0ff;\n    }\n\n    .button-fancy:active {\n      transform: scale(0.95);\n    }\n\n    .button-fancy:active::after {\n      content: \"\";\n      position: absolute;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: rgba(0, 255, 255, 0.2);\n      animation: ripple 0.6s ease-out;\n      top: 0;\n      left: 0;\n    }\n\n    @keyframes ripple {\n      from {\n        transform: scale(0);\n        opacity: 1;\n      }\n      to {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n    }\n\n    .power-icon {\n      width: 60px;\n      height: 60px;\n    }\n\n    .btn-text {\n      font-size: 16px;\n      color: #0ff;\n      font-family: \"Roboto\", sans-serif;\n      margin-top: 5px;\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n    }\n\n    #iosInstallModal {\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.8);\n      align-items: center;\n      justify-content: center;\n      z-index: 1000;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n    }\n\n    #iosInstallModal .modal-content {\n      background: #222;\n      padding: 20px;\n      border-radius: 10px;\n      text-align: center;\n      max-width: 90%;\n      color: #fff;\n      font-size: 18px;\n    }\n\n    #iosInstallModal .modal-content h3 {\n      margin-top: 0;\n    }\n\n    #iosInstallModal .close-btn {\n      background: #0ff;\n      border: none;\n      padding: 10px 20px;\n      margin-top: 15px;\n      border-radius: 5px;\n      cursor: pointer;\n      color: #000;\n      font-size: 16px;\n    }\n\n    @media only screen and (max-width: 768px) {\n      #installBtnMobile {\n        display: none;\n      }\n      #installBtnWindows {\n        display: none;\n      }\n    }\n\n    @media only screen and (min-width: 769px) {\n      #installBtnMobile {\n        display: none;\n      }\n      #installBtnWindows {\n        display: none;\n      }\n    }\n  </style>\n</head>\n<body>\n  <div class=\"overlay\" role=\"main\">\n    <h1>EPIC Power Pack</h1>\n    <h2>Turbocharge your Superpower ðŸš€</h2>\n\n    <button id=\"installBtnMobile\" class=\"button-fancy\" aria-label=\"Install EPIC Power Pack (Mobile)\">\n      <svg\n        class=\"power-icon\"\n        viewBox=\"0 0 64 64\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        role=\"img\"\n      >\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\" />\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\" />\n      </svg>\n      <span class=\"btn-text\">Power On</span>\n    </button>\n\n    <button id=\"installBtnWindows\" class=\"button-fancy\" aria-label=\"Install EPIC Power Pack (Desktop)\">\n      <svg\n        class=\"power-icon\"\n        viewBox=\"0 0 64 64\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        role=\"img\"\n      >\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\" />\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\" />\n      </svg>\n      <span class=\"btn-text\">Power On</span>\n    </button>\n  </div>\n\n  <div id=\"iosInstallModal\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modalTitle\" tabindex=\"-1\">\n    <div class=\"modal-content\">\n      <h3 id=\"modalTitle\">Install Instructions</h3>\n      <p>\n        To install this app on your iOS device, tap the Share icon (<strong>the square with arrow</strong>) in Safari or Chrome and then select <strong>\"Add to Home Screen\"</strong>.\n      </p>\n      <button class=\"close-btn\" onclick=\"closeIosModal()\">Close</button>\n    </div>\n  </div>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        2120,
        -40
      ],
      "id": "a6dcfeee-154e-4717-8ee3-eb14259ae1d0",
      "name": "Respond to Webhook2"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>EPIC Power Pack</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <meta name=\"theme-color\" content=\"#000000\" />\n\n  <!-- Windows compatibility meta tags -->\n  <meta name=\"msapplication-TileColor\" content=\"#000000\" />\n  <meta\n    name=\"msapplication-TileImage\"\n    content=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\"\n  />\n\n  <!-- Apple-specific meta tags for native-like appearance -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n  <meta name=\"apple-mobile-web-app-title\" content=\"EPIC Power Pack\" />\n  <link\n    rel=\"apple-touch-icon\"\n    href=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\"\n  />\n\n  <!-- Use a more readable font -->\n  <link\n    href=\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\"\n    rel=\"stylesheet\"\n  />\n\n  <script>\n    let deferredPrompt = null;\n\n    // Helpers\n    function isIos() {\n      const ua = window.navigator.userAgent.toLowerCase();\n      return /iphone|ipad|ipod/.test(ua);\n    }\n\n    function isInStandaloneMode() {\n      return (\n        ('standalone' in window.navigator && window.navigator.standalone) ||\n        window.matchMedia('(display-mode: standalone)').matches\n      );\n    }\n\n    // Dynamically add web app manifest\n    const manifestData = {\n      name: \"EPIC Power Pack\",\n      short_name: \"PowerPack\",\n      start_url: \".\",\n      display: \"standalone\",\n      background_color: \"#ffffff\",\n      theme_color: \"#000000\",\n      icons: [\n        {\n          src:\n            \"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\",\n          sizes: \"512x512\",\n          type: \"image/png\",\n        },\n      ],\n    };\n    const manifestBlob = new Blob([JSON.stringify(manifestData)], {\n      type: \"application/json\",\n    });\n    const manifestURL = URL.createObjectURL(manifestBlob);\n    const manifestLink = document.createElement(\"link\");\n    manifestLink.rel = \"manifest\";\n    manifestLink.href = manifestURL;\n    document.head.appendChild(manifestLink);\n\n    // Register minimal Service Worker\n    if (\"serviceWorker\" in navigator) {\n      const swCode = `\n        self.addEventListener('install', event => {\n          self.skipWaiting();\n        });\n        self.addEventListener('activate', event => {\n          // no-op\n        });\n      `;\n      const blob = new Blob([swCode], { type: \"text/javascript\" });\n      const swURL = URL.createObjectURL(blob);\n      navigator.serviceWorker\n        .register(swURL)\n        .catch((err) => console.error('Service Worker registration failed:', err));\n    }\n\n    // beforeinstallprompt for native install on supported devices (Chrome/Edge)\n    window.addEventListener(\"beforeinstallprompt\", (e) => {\n      e.preventDefault();\n      deferredPrompt = e;\n      document.getElementById(\"installBtn\").style.display = \"inline-flex\";\n    });\n\n    window.addEventListener(\"load\", () => {\n      if (isIos() && !isInStandaloneMode()) {\n        // Show install button even on iOS for consistency\n        document.getElementById(\"installBtn\").style.display = \"inline-flex\";\n      } else if (deferredPrompt) {\n        // Also show on Android/etc after beforeinstallprompt event fires\n        document.getElementById(\"installBtn\").style.display = \"inline-flex\";\n      }\n    });\n\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      const btn = document.getElementById(\"installBtn\");\n      const modal = document.getElementById(\"installModal\");\n      const closeBtn = document.getElementById(\"closeModalBtn\");\n\n      btn.addEventListener(\"click\", async () => {\n        if (isIos() && !isInStandaloneMode()) {\n          modal.style.display = \"flex\";\n        } else if (deferredPrompt) {\n          deferredPrompt.prompt();\n          const { outcome } = await deferredPrompt.userChoice;\n          console.log(\"User response to install prompt:\", outcome);\n          deferredPrompt = null;\n          btn.style.display = \"none\";\n        } else {\n          // Fallback modal for any other unsupported devices\n          modal.style.display = \"flex\";\n        }\n      });\n\n      closeBtn.addEventListener(\"click\", () => {\n        modal.style.display = \"none\";\n      });\n    });\n  </script>\n\n  <style>\n    body {\n      margin: 0;\n      padding: 0;\n      background: url(\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\")\n        no-repeat center center fixed;\n      background-size: cover;\n      font-family: \"Roboto\", sans-serif;\n      color: #fff;\n      overflow-x: hidden;\n    }\n\n    .overlay {\n      background-color: rgba(0, 0, 0, 0.5);\n      padding: 30px;\n      margin: 50px auto;\n      max-width: 600px;\n      border-radius: 10px;\n      text-align: center;\n    }\n\n    h1 {\n      margin-bottom: 0.3em;\n      font-size: 2em;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n\n    h2 {\n      margin-top: 0;\n      margin-bottom: 1em;\n      font-size: 1.2em;\n      font-weight: normal;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n\n    #installBtn {\n      display: none;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      margin: 20px auto;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: #111;\n      border: 2px solid #0ff;\n      cursor: pointer;\n      box-shadow: 0 0 10px #0ff;\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n      position: relative;\n      overflow: hidden;\n      animation: pulse 2s infinite;\n      user-select: none;\n    }\n\n    @keyframes pulse {\n      0% {\n        box-shadow: 0 0 10px #0ff;\n      }\n      50% {\n        box-shadow: 0 0 20px #0ff;\n      }\n      100% {\n        box-shadow: 0 0 10px #0ff;\n      }\n    }\n\n    #installBtn:hover {\n      box-shadow: 0 0 30px #0ff;\n    }\n\n    #installBtn:active {\n      transform: scale(0.95);\n    }\n\n    #installBtn:active::after {\n      content: \"\";\n      position: absolute;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: rgba(0, 255, 255, 0.2);\n      animation: ripple 0.6s ease-out;\n      top: 0;\n      left: 0;\n    }\n\n    @keyframes ripple {\n      from {\n        transform: scale(0);\n        opacity: 1;\n      }\n      to {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n    }\n\n    .power-icon {\n      width: 60px;\n      height: 60px;\n    }\n\n    .btn-text {\n      font-size: 16px;\n      color: #0ff;\n      margin-top: 5px;\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n      font-family: \"Roboto\", sans-serif;\n    }\n\n    /* Modal styling */\n    #installModal {\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      background: rgba(0, 0, 0, 0.85);\n      align-items: center;\n      justify-content: center;\n      z-index: 10000;\n      padding: 20px;\n      box-sizing: border-box;\n      overflow-y: auto;\n      flex-direction: column;\n    }\n\n    #installModal.flex {\n      display: flex;\n    }\n\n    #installModal .modal-content {\n      background: #222;\n      border-radius: 10px;\n      max-width: 450px;\n      width: 100%;\n      color: #fff;\n      font-size: 16px;\n      padding: 25px;\n      box-sizing: border-box;\n    }\n\n    #installModal h3 {\n      margin-top: 0;\n      text-align: center;\n      font-size: 1.5em;\n    }\n\n    #installModal ul {\n      list-style: none;\n      padding: 0;\n      margin: 15px 0 0 0;\n    }\n\n    #installModal li {\n      margin-bottom: 18px;\n      display: flex;\n      align-items: center;\n      gap: 12px;\n    }\n\n    #installModal li svg,\n    #installModal li img {\n      width: 28px;\n      height: 28px;\n      flex-shrink: 0;\n      fill: #0ff;\n      stroke: #0ff;\n    }\n\n    #installModal .close-btn {\n      margin-top: 20px;\n      width: 100%;\n      background: #0ff;\n      border: none;\n      padding: 12px 0;\n      font-weight: bold;\n      color: #000;\n      border-radius: 5px;\n      cursor: pointer;\n      font-size: 16px;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"overlay\" role=\"main\">\n    <h1>EPIC Power Pack</h1>\n    <h2>Turbocharge your Superpower ðŸš€</h2>\n\n    <button id=\"installBtn\" class=\"button-fancy\" aria-label=\"Install EPIC Power Pack\">\n      <svg\n        class=\"power-icon\"\n        viewBox=\"0 0 64 64\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        role=\"img\"\n      >\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\"></circle>\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\"></line>\n      </svg>\n      <span class=\"btn-text\">Power On</span>\n    </button>\n  </div>\n\n  <div id=\"installModal\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modalTitle\" tabindex=\"-1\" style=\"display:none; flex-direction: column; align-items:center;\">\n    <div class=\"modal-content\">\n      <h3 id=\"modalTitle\">Install Instructions</h3>\n      <ul>\n        <li>\n          <!-- Android Chrome icon -->\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\"><rect x=\"3\" y=\"11\" width=\"18\" height=\"8\" rx=\"2\" ry=\"2\"/><path d=\"M7 11V7a5 5 0 0 1 10 0v4\"/></svg>\n          <span><strong>Android Chrome/Edge:</strong> Tap the browser menu and select <em>Add to Home screen</em>.</span>\n        </li>\n        <li>\n          <!-- iOS Safari share icon -->\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\"><path d=\"M18 19a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h3l2-3 2 3h3a2 2 0 0 1 2 2z\"/></svg>\n          <span><strong>iOS Safari:</strong> Tap the <em>Share</em> icon (the square with arrow) then tap <em>Add to Home Screen</em>.</span>\n        </li>\n        <li>\n          <!-- Desktop icon -->\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\"><rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/><line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\"/><line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\"/></svg>\n          <span><strong>Desktop Browsers:</strong> Use the browser menu and select <em>Install App</em> or <em>Add to Desktop</em> if available.</span>\n        </li>\n      </ul>\n      <button id=\"closeModalBtn\" class=\"close-btn\" aria-label=\"Close install instructions\">Close</button>\n    </div>\n  </div>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        2320,
        -40
      ],
      "id": "f791400f-37e6-4d57-965d-bbf76d4a531c",
      "name": "Respond to Webhook3"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Embedded Iframe with Zoom Disabled</title>\n  <!-- Prevent zooming via meta tag -->\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\">\n  <meta name=\"theme-color\" content=\"#000000\">\n  <!-- Apple-specific meta tags -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\">\n  \n  <style>\n    /* The container fills the viewport and clips any overflow */\n    .iframe-container {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      overflow: hidden;\n    }\n    /* The iframe's intrinsic size is half of the container,\n       then scaled up 2Ã— to fill the space */\n    .iframe-container iframe {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: calc(100% / 1);\n      height: calc(100% / 1);\n      transform: scale(1);\n      transform-origin: top left;\n      border: none;\n    }\n  </style>\n  \n  <script>\n    // Prevent double-tap zoom by intercepting touchend events.\n    let lastTouchEnd = 0;\n    document.addEventListener('touchend', function(event) {\n      const now = Date.now();\n      if (now - lastTouchEnd <= 300) {\n        event.preventDefault();\n      }\n      lastTouchEnd = now;\n    }, false);\n    \n    // Prevent pinch zoom by intercepting touchmove events.\n    document.addEventListener('touchmove', function(event) {\n      if (event.scale && event.scale !== 1) {\n        event.preventDefault();\n      }\n    }, { passive: false });\n  </script>\n</head>\n<body>\n  <div class=\"iframe-container\">\n    <iframe src=\"https://n8n.cybertech.app/webhook/e225c70c-13d2-4902-bef9-977e3207b715\"\n            allow=\"accelerometer; ambient-light-sensor; autoplay; battery; camera; clipboard-read; clipboard-write; encrypted-media; fullscreen; geolocation; gyroscope; magnetometer; microphone; midi; payment; picture-in-picture; usb; xr-spatial-tracking;\">\n    </iframe>\n  </div>\n</body>\n</html>\n",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        240,
        -360
      ],
      "id": "e5c31469-5eef-4b64-b377-d0ef0264d355",
      "name": "Respond to Webhook8"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>EPIC Power Pack</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <meta name=\"theme-color\" content=\"#000000\" />\n\n  <!-- Windows compatibility meta tags -->\n  <meta name=\"msapplication-TileColor\" content=\"#000000\" />\n  <meta\n    name=\"msapplication-TileImage\"\n    content=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\"\n  />\n\n  <!-- Apple-specific meta tags for native-like appearance -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n  <meta name=\"apple-mobile-web-app-title\" content=\"EPIC Power Pack\" />\n  <link\n    rel=\"apple-touch-icon\"\n    href=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\"\n  />\n\n  <!-- Use a readable font -->\n  <link\n    href=\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\"\n    rel=\"stylesheet\"\n  />\n\n  <style>\n    body {\n      margin: 0;\n      padding: 0;\n      background: url(\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\")\n        no-repeat center center fixed;\n      background-size: cover;\n      font-family: \"Roboto\", sans-serif;\n      color: #fff;\n      overflow-x: hidden;\n    }\n    .overlay {\n      background-color: rgba(0, 0, 0, 0.6);\n      padding: 30px;\n      margin: 50px auto;\n      max-width: 600px;\n      border-radius: 10px;\n      text-align: center;\n    }\n    h1 {\n      margin-bottom: 0.3em;\n      font-size: 2em;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n    h2 {\n      margin-top: 0;\n      margin-bottom: 1em;\n      font-size: 1.2em;\n      font-weight: normal;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n    #installBtn {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      margin: 20px auto;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: #111;\n      border: 2px solid #0ff;\n      cursor: pointer;\n      box-shadow: 0 0 10px #0ff;\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n      position: relative;\n      overflow: hidden;\n      animation: pulse 2s infinite;\n      user-select: none;\n    }\n    @keyframes pulse {\n      0% {\n        box-shadow: 0 0 10px #0ff;\n      }\n      50% {\n        box-shadow: 0 0 20px #0ff;\n      }\n      100% {\n        box-shadow: 0 0 10px #0ff;\n      }\n    }\n    #installBtn:hover {\n      box-shadow: 0 0 30px #0ff;\n    }\n    #installBtn:active {\n      transform: scale(0.95);\n    }\n    #installBtn:active::after {\n      content: \"\";\n      position: absolute;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: rgba(0, 255, 255, 0.2);\n      animation: ripple 0.6s ease-out;\n      top: 0;\n      left: 0;\n    }\n    @keyframes ripple {\n      from {\n        transform: scale(0);\n        opacity: 1;\n      }\n      to {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n    }\n    .power-icon {\n      width: 60px;\n      height: 60px;\n    }\n    .btn-text {\n      font-size: 16px;\n      color: #0ff;\n      margin-top: 5px;\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n      font-family: \"Roboto\", sans-serif;\n    }\n    #installModal {\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      background: rgba(0, 0, 0, 0.9);\n      align-items: center;\n      justify-content: center;\n      z-index: 10000;\n      padding: 20px;\n      box-sizing: border-box;\n      overflow-y: auto;\n      flex-direction: column;\n    }\n    #installModal.flex {\n      display: flex;\n    }\n    #installModal .modal-content {\n      background: #222;\n      border-radius: 10px;\n      max-width: 460px;\n      width: 100%;\n      color: #fff;\n      font-size: 16px;\n      padding: 25px 30px;\n      box-sizing: border-box;\n    }\n    #installModal h3 {\n      margin-top: 0;\n      text-align: center;\n      font-size: 1.6em;\n    }\n    #installModal ul {\n      list-style: none;\n      padding: 0;\n      margin: 15px 0 0 0;\n    }\n    #installModal li {\n      margin-bottom: 20px;\n      display: flex;\n      align-items: center;\n      gap: 14px;\n      line-height: 1.3;\n    }\n    #installModal li svg {\n      width: 28px;\n      height: 28px;\n      flex-shrink: 0;\n      stroke: #0ff;\n      fill: none;\n    }\n    #installModal .close-btn {\n      margin-top: 25px;\n      width: 100%;\n      background: #0ff;\n      border: none;\n      padding: 12px 0;\n      font-weight: bold;\n      color: #000;\n      border-radius: 5px;\n      cursor: pointer;\n      font-size: 16px;\n      transition: background 0.2s ease;\n    }\n    #installModal .close-btn:hover,\n    #installModal .close-btn:focus {\n      background: #33ffff;\n      outline: none;\n    }\n    /* Confetti container */\n    #confetti-wrapper {\n      pointer-events: none;\n      position: fixed;\n      top: 0; left: 0;\n      width: 100%;\n      height: 100%;\n      overflow: visible;\n      z-index: 11000;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"overlay\" role=\"main\">\n    <h1>EPIC Power Pack</h1>\n    <h2>Turbocharge your Superpower ðŸš€</h2>\n\n    <button id=\"installBtn\" class=\"button-fancy\" aria-label=\"Activate Power On\">\n      <svg\n        class=\"power-icon\"\n        viewBox=\"0 0 64 64\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        role=\"img\"\n      >\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\"></circle>\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\"></line>\n      </svg>\n      <span class=\"btn-text\">Power On</span>\n    </button>\n  </div>\n\n  <div id=\"installModal\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modalTitle\" tabindex=\"-1\" style=\"display:none;\">\n    <div class=\"modal-content\">\n      <h3 id=\"modalTitle\">Install Instructions</h3>\n      <ul>\n        <li>\n          <svg viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\" >\n            <rect x=\"3\" y=\"11\" width=\"18\" height=\"8\" rx=\"2\" ry=\"2\"/>\n            <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"/>\n          </svg>\n          <strong>Android Chrome/Edge:</strong> Tap the browser menu and select <em>Add to Home screen</em>.\n        </li>\n        <li>\n          <svg viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\" >\n            <path d=\"M18 19a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h3l2-3 2 3h3a2 2 0 0 1 2 2z\"/>\n          </svg>\n          <strong>iOS Safari:</strong> Tap the <em>Share</em> icon (the square with arrow) then tap <em>Add to Home Screen</em>.\n        </li>\n        <li>\n          <svg viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\" >\n            <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/>\n            <line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\"/>\n            <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\"/>\n          </svg>\n          <strong>Desktop Browsers:</strong> Use the browser menu and select <em>Install App</em> or <em>Add to Desktop</em> if available.\n        </li>\n      </ul>\n      <button id=\"closeModalBtn\" class=\"close-btn\" aria-label=\"Close install instructions\">Close</button>\n    </div>\n  </div>\n\n  <!-- Confetti container -->\n  <div id=\"confetti-wrapper\"></div>\n\n  <script>\n    let deferredPrompt = null;\n\n    function isIos() {\n      const ua = window.navigator.userAgent.toLowerCase();\n      return /iphone|ipad|ipod/.test(ua);\n    }\n\n    function isInStandaloneMode() {\n      return (\n        ('standalone' in window.navigator && window.navigator.standalone) ||\n        window.matchMedia('(display-mode: standalone)').matches\n      );\n    }\n\n    // Setup manifest dynamically\n    const manifestData = {\n      name: 'EPIC Power Pack',\n      short_name: 'PowerPack',\n      start_url: '.',\n      display: 'standalone',\n      background_color: '#ffffff',\n      theme_color: '#000000',\n      icons: [\n        {\n          src: 'https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png',\n          sizes: '512x512',\n          type: 'image/png'\n        }\n      ]\n    };\n    const manifestBlob = new Blob([JSON.stringify(manifestData)], {type:'application/json'});\n    const manifestURL = URL.createObjectURL(manifestBlob);\n    const manifestLink = document.createElement('link');\n    manifestLink.rel = 'manifest';\n    manifestLink.href = manifestURL;\n    document.head.appendChild(manifestLink);\n\n    // Service worker registration\n    if ('serviceWorker' in navigator) {\n      const swCode = `\n        self.addEventListener('install', event => { self.skipWaiting(); });\n        self.addEventListener('activate', event => {});\n      `;\n      const blob = new Blob([swCode], {type:'text/javascript'});\n      const swURL = URL.createObjectURL(blob);\n      navigator.serviceWorker.register(swURL).catch(e => console.error('SW Reg failed', e));\n    }\n\n    // Show install button on beforeinstallprompt\n    window.addEventListener('beforeinstallprompt', e => {\n      e.preventDefault();\n      deferredPrompt = e;\n      document.getElementById('installBtn').style.display = 'inline-flex';\n    });\n\n    // Show install button on iOS if not installed\n    window.addEventListener('load', () => {\n      if (isIos() && !isInStandaloneMode()) {\n        document.getElementById('installBtn').style.display = 'inline-flex';\n      } else if (deferredPrompt) {\n        document.getElementById('installBtn').style.display = 'inline-flex';\n      }\n    });\n\n    // Confetti utility\n    function createConfettiParticle(x, y) {\n      const particle = document.createElement('div');\n      const size = Math.floor(Math.random() * 8) + 6 + 'px';\n      particle.style.position = 'fixed';\n      particle.style.left = x + 'px';\n      particle.style.top = y + 'px';\n      particle.style.width = size;\n      particle.style.height = size;\n      particle.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 70%)`;\n      particle.style.borderRadius = '50%';\n      particle.style.pointerEvents = 'none';\n      particle.style.zIndex = 11000;\n      particle.style.opacity = 1;\n      particle.style.transform = `translate(0, 0)`;\n      particle.style.willChange = 'transform, opacity';\n\n      const directionX = (Math.random() - 0.5) * 200;\n      const directionY = (Math.random() - 1) * 200;\n\n      let start = null;\n      function animate(timestamp) {\n        if (!start) start = timestamp;\n        const progress = timestamp - start;\n        const easeOut = 1 - Math.pow(1 - progress / 1000, 3);\n\n        particle.style.transform = `translate(${directionX * easeOut}px, ${directionY * easeOut}px)`;\n        particle.style.opacity = String(1 - easeOut);\n\n        if (progress < 1000) {\n          requestAnimationFrame(animate);\n        } else {\n          particle.remove();\n        }\n      }\n\n      requestAnimationFrame(animate);\n      return particle;\n    }\n\n    function runConfetti(x, y) {\n      const container = document.getElementById('confetti-wrapper');\n      for (let i = 0; i < 30; i++) {\n        const particle = createConfettiParticle(x, y);\n        container.appendChild(particle);\n      }\n    }\n\n    document.addEventListener('DOMContentLoaded', () => {\n      const btn = document.getElementById('installBtn');\n      const modal = document.getElementById('installModal');\n      const closeBtn = document.getElementById('closeModalBtn');\n\n      btn.addEventListener('click', async (e) => {\n        // Run confetti at button center\n        const rect = btn.getBoundingClientRect();\n        runConfetti(rect.left + rect.width / 2, rect.top + rect.height / 2);\n\n        if (isIos() && !isInStandaloneMode()) {\n          modal.style.display = 'flex';\n          modal.focus();\n        } else if (deferredPrompt) {\n          deferredPrompt.prompt();\n          const { outcome } = await deferredPrompt.userChoice;\n          console.log('User response to install prompt:', outcome);\n          deferredPrompt = null;\n          btn.style.display = 'none';\n        } else {\n          modal.style.display = 'flex';\n          modal.focus();\n        }\n      });\n\n      closeBtn.addEventListener('click', () => {\n        modal.style.display = 'none';\n        btn.focus();\n      });\n\n      // Close modal on Escape key\n      window.addEventListener('keydown', (e) => {\n        if (e.key === 'Escape' && modal.style.display === 'flex') {\n          modal.style.display = 'none';\n          btn.focus();\n        }\n      });\n    });\n  </script>\n\n  <!-- Confetti container -->\n  <div id=\"confetti-wrapper\"></div>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        2540,
        -40
      ],
      "id": "1ca8453a-1935-495a-958d-ceb955d5a8f6",
      "name": "Respond to Webhook4"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>EPIC Power Pack</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <meta name=\"theme-color\" content=\"#000000\" />\n\n  <!-- Windows compatibility meta tags -->\n  <meta name=\"msapplication-TileColor\" content=\"#000000\" />\n  <meta\n    name=\"msapplication-TileImage\"\n    content=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\"\n  />\n\n  <!-- Apple-specific meta tags for native-like appearance -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n  <meta name=\"apple-mobile-web-app-title\" content=\"EPIC Power Pack\" />\n  <link\n    rel=\"apple-touch-icon\"\n    href=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\"\n  />\n\n  <!-- Use a readable font -->\n  <link\n    href=\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\"\n    rel=\"stylesheet\"\n  />\n\n  <style>\n    /* Your existing styles unchanged */\n    body {\n      margin: 0;\n      padding: 0;\n      background: url(\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\")\n        no-repeat center center fixed;\n      background-size: cover;\n      font-family: \"Roboto\", sans-serif;\n      color: #fff;\n      overflow-x: hidden;\n    }\n    .overlay {\n      background-color: rgba(0, 0, 0, 0.6);\n      padding: 30px;\n      margin: 50px auto;\n      max-width: 600px;\n      border-radius: 10px;\n      text-align: center;\n    }\n    h1 {\n      margin-bottom: 0.3em;\n      font-size: 2em;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n    h2 {\n      margin-top: 0;\n      margin-bottom: 1em;\n      font-size: 1.2em;\n      font-weight: normal;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n    #installBtn {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      margin: 20px auto;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: #111;\n      border: 2px solid #0ff;\n      cursor: pointer;\n      box-shadow: 0 0 10px #0ff;\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n      position: relative;\n      overflow: hidden;\n      animation: pulse 2s infinite;\n      user-select: none;\n    }\n    @keyframes pulse {\n      0% {\n        box-shadow: 0 0 10px #0ff;\n      }\n      50% {\n        box-shadow: 0 0 20px #0ff;\n      }\n      100% {\n        box-shadow: 0 0 10px #0ff;\n      }\n    }\n    #installBtn:hover {\n      box-shadow: 0 0 30px #0ff;\n    }\n    #installBtn:active {\n      transform: scale(0.95);\n    }\n    #installBtn:active::after {\n      content: \"\";\n      position: absolute;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: rgba(0, 255, 255, 0.2);\n      animation: ripple 0.6s ease-out;\n      top: 0;\n      left: 0;\n    }\n    @keyframes ripple {\n      from {\n        transform: scale(0);\n        opacity: 1;\n      }\n      to {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n    }\n    .power-icon {\n      width: 60px;\n      height: 60px;\n    }\n    .btn-text {\n      font-size: 16px;\n      color: #0ff;\n      margin-top: 5px;\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n      font-family: \"Roboto\", sans-serif;\n    }\n    #installModal {\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      background: rgba(0, 0, 0, 0.9);\n      align-items: center;\n      justify-content: center;\n      z-index: 10000;\n      padding: 20px;\n      box-sizing: border-box;\n      overflow-y: auto;\n      flex-direction: column;\n    }\n    #installModal.flex {\n      display: flex;\n    }\n    #installModal .modal-content {\n      background: #222;\n      border-radius: 10px;\n      max-width: 460px;\n      width: 100%;\n      color: #fff;\n      font-size: 16px;\n      padding: 25px 30px;\n      box-sizing: border-box;\n    }\n    #installModal h3 {\n      margin-top: 0;\n      text-align: center;\n      font-size: 1.6em;\n    }\n    #installModal ul {\n      list-style: none;\n      padding: 0;\n      margin: 15px 0 0 0;\n    }\n    #installModal li {\n      margin-bottom: 20px;\n      display: flex;\n      align-items: center;\n      gap: 14px;\n      line-height: 1.3;\n    }\n    #installModal li svg {\n      width: 28px;\n      height: 28px;\n      flex-shrink: 0;\n      stroke: #0ff;\n      fill: none;\n    }\n    #installModal .close-btn {\n      margin-top: 25px;\n      width: 100%;\n      background: #0ff;\n      border: none;\n      padding: 12px 0;\n      font-weight: bold;\n      color: #000;\n      border-radius: 5px;\n      cursor: pointer;\n      font-size: 16px;\n      transition: background 0.2s ease;\n    }\n    #installModal .close-btn:hover,\n    #installModal .close-btn:focus {\n      background: #33ffff;\n      outline: none;\n    }\n    /* Confetti container */\n    #confetti-wrapper {\n      pointer-events: none;\n      position: fixed;\n      top: 0; left: 0;\n      width: 100%;\n      height: 100%;\n      overflow: visible;\n      z-index: 11000;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"overlay\" role=\"main\">\n    <h1>EPIC Power Pack</h1>\n    <h2>Turbocharge your Superpower ðŸš€</h2>\n\n    <button id=\"installBtn\" class=\"button-fancy\" aria-label=\"Activate Power On\" style=\"display:none;\">\n      <svg\n        class=\"power-icon\"\n        viewBox=\"0 0 64 64\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        role=\"img\"\n      >\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\"></circle>\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\"></line>\n      </svg>\n      <span class=\"btn-text\">Power On</span>\n    </button>\n  </div>\n\n  <div id=\"installModal\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modalTitle\" tabindex=\"-1\" style=\"display:none;\">\n    <div class=\"modal-content\">\n      <h3 id=\"modalTitle\">Install Instructions</h3>\n      <ul>\n        <li>\n          <svg viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\" >\n            <rect x=\"3\" y=\"11\" width=\"18\" height=\"8\" rx=\"2\" ry=\"2\"/>\n            <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"/>\n          </svg>\n          <strong>Android Chrome/Edge:</strong> Tap the browser menu and select <em>Add to Home screen</em>.\n        </li>\n        <li>\n          <svg viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\" >\n            <path d=\"M18 19a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h3l2-3 2 3h3a2 2 0 0 1 2 2z\"/>\n          </svg>\n          <strong>iOS Safari:</strong> Tap the <em>Share</em> icon (the square with arrow) then tap <em>Add to Home Screen</em>.\n        </li>\n        <li>\n          <svg viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\" >\n            <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/>\n            <line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\"/>\n            <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\"/>\n          </svg>\n          <strong>Desktop Browsers:</strong> Use the browser menu and select <em>Install App</em> or <em>Add to Desktop</em> if available.\n        </li>\n      </ul>\n      <button id=\"closeModalBtn\" class=\"close-btn\" aria-label=\"Close install instructions\">Close</button>\n    </div>\n  </div>\n\n  <!-- Confetti container -->\n  <div id=\"confetti-wrapper\"></div>\n\n  <script src=\"https://cdn.jsdelivr.net/npm/keycloak-js@latest/dist/keycloak.min.js\"></script>\n  <script>\n    // Stored constants for Keycloak config & entity / base url\n    const KEYCLOAK_CONFIG = {\n      url: 'https://keycloak.cybertech.app',\n      realm: 'EPIC',\n      clientId: 'powerpack'  // your client id here\n    };\n    const ENTITY = 'e225c70c-13d2-4902-bef9-977e3207b715';\n    const BASE_IFRAME_URL = 'https://xl.epicpc.com/webhook/powerpack';\n\n    const KEYCLOAK_STORAGE_KEY = 'epic_powerpack_authenticated_url';\n\n    // Keycloak instance global\n    let keycloak = null;\n\n    // Initialize Keycloak and handle authentication & storing url\n    async function initKeycloak() {\n      keycloak = new Keycloak(KEYCLOAK_CONFIG);\n\n      try {\n        const authenticated = await keycloak.init({ onLoad: 'login-required' });\n        if (!authenticated) {\n          alert('Authentication failed, please refresh and try again.');\n          return;\n        }\n        const user = keycloak.tokenParsed.preferred_username || 'unknown';\n\n        // Build the full URL with query params\n        const url = new URL(BASE_IFRAME_URL);\n        url.searchParams.set('entity', ENTITY);\n        url.searchParams.set('user', user);\n        const fullUrl = url.toString();\n\n        // Store it locally for subsequent use\n        localStorage.setItem(KEYCLOAK_STORAGE_KEY, fullUrl);\n\n        // Show \"Power On\" button (if hidden)\n        document.getElementById('installBtn').style.display = 'inline-flex';\n\n        // Optionally: You could auto-launch the iframe/page here or wait for user click\n        // window.location.href = fullUrl;\n\n      } catch (err) {\n        console.error('Keycloak init error:', err);\n        alert('Authentication or initialization error.');\n      }\n    }\n\n    // On Power On button click, launch the stored URL\n    function launchApp() {\n      const storedUrl = localStorage.getItem(KEYCLOAK_STORAGE_KEY);\n      if (storedUrl) {\n        // Redirect user to the constructed URL\n        window.location.href = storedUrl;\n      } else {\n        alert('No authenticated session found, please refresh and login again.');\n      }\n    }\n\n    // Your existing install and confetti code left unchanged \n    let deferredPrompt = null;\n\n    function isIos() {\n      const ua = window.navigator.userAgent.toLowerCase();\n      return /iphone|ipad|ipod/.test(ua);\n    }\n\n    function isInStandaloneMode() {\n      return (\n        ('standalone' in window.navigator && window.navigator.standalone) ||\n        window.matchMedia('(display-mode: standalone)').matches\n      );\n    }\n\n    // Setup manifest dynamically\n    const manifestData = {\n      name: 'EPIC Power Pack',\n      short_name: 'PowerPack',\n      start_url: '.',\n      display: 'standalone',\n      background_color: '#ffffff',\n      theme_color: '#000000',\n      icons: [\n        {\n          src: 'https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png',\n          sizes: '512x512',\n          type: 'image/png'\n        }\n      ]\n    };\n    const manifestBlob = new Blob([JSON.stringify(manifestData)], {type:'application/json'});\n    const manifestURL = URL.createObjectURL(manifestBlob);\n    const manifestLink = document.createElement('link');\n    manifestLink.rel = 'manifest';\n    manifestLink.href = manifestURL;\n    document.head.appendChild(manifestLink);\n\n    // Service worker registration\n    if ('serviceWorker' in navigator) {\n      const swCode = `\n        self.addEventListener('install', event => { self.skipWaiting(); });\n        self.addEventListener('activate', event => {});\n      `;\n      const blob = new Blob([swCode], {type:'text/javascript'});\n      const swURL = URL.createObjectURL(blob);\n      navigator.serviceWorker.register(swURL).catch(e => console.error('SW Reg failed', e));\n    }\n\n    // Show install button on beforeinstallprompt\n    window.addEventListener('beforeinstallprompt', e => {\n      e.preventDefault();\n      deferredPrompt = e;\n      // Wait for authentication before showing install button (done in initKeycloak)\n    });\n\n    // Show install button on iOS if not installed\n    window.addEventListener('load', () => {\n      // Initiate Keycloak and show button when ready\n      initKeycloak();\n\n      if (isIos() && !isInStandaloneMode()) {\n        document.getElementById('installBtn').style.display = 'inline-flex';\n      } else if (deferredPrompt) {\n        // deferredPrompt is set in beforeinstallprompt event, but we show the button only after auth\n        // so no action here\n      }\n    });\n\n    document.addEventListener('DOMContentLoaded', () => {\n      const btn = document.getElementById('installBtn');\n      const modal = document.getElementById('installModal');\n      const closeBtn = document.getElementById('closeModalBtn');\n\n      btn.addEventListener('click', async (e) => {\n        // Run confetti at button center\n        const rect = btn.getBoundingClientRect();\n        runConfetti(rect.left + rect.width / 2, rect.top + rect.height / 2);\n\n        launchApp();\n\n        if (isIos() && !isInStandaloneMode()) {\n          modal.style.display = 'flex';\n          modal.focus();\n        } else if (deferredPrompt) {\n          deferredPrompt.prompt();\n          const { outcome } = await deferredPrompt.userChoice;\n          console.log('User response to install prompt:', outcome);\n          deferredPrompt = null;\n          btn.style.display = 'none';\n        } else {\n          modal.style.display = 'flex';\n          modal.focus();\n        }\n      });\n\n      closeBtn.addEventListener('click', () => {\n        modal.style.display = 'none';\n        btn.focus();\n      });\n\n      // Close modal on Escape key\n      window.addEventListener('keydown', (e) => {\n        if (e.key === 'Escape' && modal.style.display === 'flex') {\n          modal.style.display = 'none';\n          btn.focus();\n        }\n      });\n    });\n\n    // Confetti utility functions (unchanged)\n    function createConfettiParticle(x, y) {\n      const particle = document.createElement('div');\n      const size = Math.floor(Math.random() * 8) + 6 + 'px';\n      particle.style.position = 'fixed';\n      particle.style.left = x + 'px';\n      particle.style.top = y + 'px';\n      particle.style.width = size;\n      particle.style.height = size;\n      particle.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 70%)`;\n      particle.style.borderRadius = '50%';\n      particle.style.pointerEvents = 'none';\n      particle.style.zIndex = 11000;\n      particle.style.opacity = 1;\n      particle.style.transform = `translate(0, 0)`;\n      particle.style.willChange = 'transform, opacity';\n\n      const directionX = (Math.random() - 0.5) * 200;\n      const directionY = (Math.random() - 1) * 200;\n\n      let start = null;\n      function animate(timestamp) {\n        if (!start) start = timestamp;\n        const progress = timestamp - start;\n        const easeOut = 1 - Math.pow(1 - progress / 1000, 3);\n\n        particle.style.transform = `translate(${directionX * easeOut}px, ${directionY * easeOut}px)`;\n        particle.style.opacity = String(1 - easeOut);\n\n        if (progress < 1000) {\n          requestAnimationFrame(animate);\n        } else {\n          particle.remove();\n        }\n      }\n\n      requestAnimationFrame(animate);\n      return particle;\n    }\n\n    function runConfetti(x, y) {\n      const container = document.getElementById('confetti-wrapper');\n      for (let i = 0; i < 30; i++) {\n        const particle = createConfettiParticle(x, y);\n        container.appendChild(particle);\n      }\n    }\n  </script>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        2540,
        -180
      ],
      "id": "6451c170-6335-4dd4-876f-0cd5ba4db2bb",
      "name": "Respond to Webhook5"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>EPIC Power Pack</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <meta name=\"theme-color\" content=\"#000000\" />\n\n  <!-- Windows compatibility meta tags -->\n  <meta name=\"msapplication-TileColor\" content=\"#000000\" />\n  <meta\n    name=\"msapplication-TileImage\"\n    content=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\"\n  />\n\n  <!-- Apple-specific meta tags for native-like appearance -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n  <meta name=\"apple-mobile-web-app-title\" content=\"EPIC Power Pack\" />\n  <link\n    rel=\"apple-touch-icon\"\n    href=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\"\n  />\n\n  <!-- Use a readable font -->\n  <link\n    href=\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\"\n    rel=\"stylesheet\"\n  />\n\n  <style>\n    /* Your full existing CSS styles */\n    body {\n      margin: 0;\n      padding: 0;\n      background: url(\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\")\n        no-repeat center center fixed;\n      background-size: cover;\n      font-family: \"Roboto\", sans-serif;\n      color: #fff;\n      overflow-x: hidden;\n    }\n    .overlay {\n      background-color: rgba(0, 0, 0, 0.6);\n      padding: 30px;\n      margin: 50px auto;\n      max-width: 600px;\n      border-radius: 10px;\n      text-align: center;\n    }\n    h1 {\n      margin-bottom: 0.3em;\n      font-size: 2em;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n    h2 {\n      margin-top: 0;\n      margin-bottom: 1em;\n      font-size: 1.2em;\n      font-weight: normal;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n    #installBtn {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      margin: 20px auto;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: #111;\n      border: 2px solid #0ff;\n      cursor: pointer;\n      box-shadow: 0 0 10px #0ff;\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n      position: relative;\n      overflow: hidden;\n      animation: pulse 2s infinite;\n      user-select: none;\n      display: none; /* initially hidden, show after login */\n    }\n    @keyframes pulse {\n      0% {\n        box-shadow: 0 0 10px #0ff;\n      }\n      50% {\n        box-shadow: 0 0 20px #0ff;\n      }\n      100% {\n        box-shadow: 0 0 10px #0ff;\n      }\n    }\n    #installBtn:hover {\n      box-shadow: 0 0 30px #0ff;\n    }\n    #installBtn:active {\n      transform: scale(0.95);\n    }\n    #installBtn:active::after {\n      content: \"\";\n      position: absolute;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: rgba(0, 255, 255, 0.2);\n      animation: ripple 0.6s ease-out;\n      top: 0;\n      left: 0;\n    }\n    @keyframes ripple {\n      from {\n        transform: scale(0);\n        opacity: 1;\n      }\n      to {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n    }\n    .power-icon {\n      width: 60px;\n      height: 60px;\n    }\n    .btn-text {\n      font-size: 16px;\n      color: #0ff;\n      margin-top: 5px;\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n      font-family: \"Roboto\", sans-serif;\n    }\n    #installModal {\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      background: rgba(0, 0, 0, 0.9);\n      align-items: center;\n      justify-content: center;\n      z-index: 10000;\n      padding: 20px;\n      box-sizing: border-box;\n      overflow-y: auto;\n      flex-direction: column;\n    }\n    #installModal.flex {\n      display: flex;\n    }\n    #installModal .modal-content {\n      background: #222;\n      border-radius: 10px;\n      max-width: 460px;\n      width: 100%;\n      color: #fff;\n      font-size: 16px;\n      padding: 25px 30px;\n      box-sizing: border-box;\n    }\n    #installModal h3 {\n      margin-top: 0;\n      text-align: center;\n      font-size: 1.6em;\n    }\n    #installModal ul {\n      list-style: none;\n      padding: 0;\n      margin: 15px 0 0 0;\n    }\n    #installModal li {\n      margin-bottom: 20px;\n      display: flex;\n      align-items: center;\n      gap: 14px;\n      line-height: 1.3;\n    }\n    #installModal li svg {\n      width: 28px;\n      height: 28px;\n      flex-shrink: 0;\n      stroke: #0ff;\n      fill: none;\n    }\n    #installModal .close-btn {\n      margin-top: 25px;\n      width: 100%;\n      background: #0ff;\n      border: none;\n      padding: 12px 0;\n      font-weight: bold;\n      color: #000;\n      border-radius: 5px;\n      cursor: pointer;\n      font-size: 16px;\n      transition: background 0.2s ease;\n    }\n    #installModal .close-btn:hover,\n    #installModal .close-btn:focus {\n      background: #33ffff;\n      outline: none;\n    }\n    /* Confetti container */\n    #confetti-wrapper {\n      pointer-events: none;\n      position: fixed;\n      top: 0; left: 0;\n      width: 100%;\n      height: 100%;\n      overflow: visible;\n      z-index: 11000;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"overlay\" role=\"main\">\n    <h1>EPIC Power Pack</h1>\n    <h2>Turbocharge your Superpower ðŸš€</h2>\n\n    <button id=\"installBtn\" class=\"button-fancy\" aria-label=\"Activate Power On\">\n      <svg\n        class=\"power-icon\"\n        viewBox=\"0 0 64 64\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        role=\"img\"\n      >\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\"></circle>\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\"></line>\n      </svg>\n      <span class=\"btn-text\">Power On</span>\n    </button>\n  </div>\n\n  <div id=\"installModal\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modalTitle\" tabindex=\"-1\" style=\"display:none;\">\n    <div class=\"modal-content\">\n      <h3 id=\"modalTitle\">Install Instructions</h3>\n      <ul>\n        <li>\n          <svg viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\" >\n            <rect x=\"3\" y=\"11\" width=\"18\" height=\"8\" rx=\"2\" ry=\"2\"/>\n            <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"/>\n          </svg>\n          <strong>Android Chrome/Edge:</strong> Tap the browser menu and select <em>Add to Home screen</em>.\n        </li>\n        <li>\n          <svg viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\" >\n            <path d=\"M18 19a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h3l2-3 2 3h3a2 2 0 0 1 2 2z\"/>\n          </svg>\n          <strong>iOS Safari:</strong> Tap the <em>Share</em> icon (the square with arrow) then tap <em>Add to Home Screen</em>.\n        </li>\n        <li>\n          <svg viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\" >\n            <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/>\n            <line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\"/>\n            <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\"/>\n          </svg>\n          <strong>Desktop Browsers:</strong> Use the browser menu and select <em>Install App</em> or <em>Add to Desktop</em> if available.\n        </li>\n      </ul>\n      <button id=\"closeModalBtn\" class=\"close-btn\" aria-label=\"Close install instructions\">Close</button>\n    </div>\n  </div>\n\n  <!-- Confetti container -->\n  <div id=\"confetti-wrapper\"></div>\n\n  <script src=\"https://cdn.jsdelivr.net/npm/keycloak-js@latest/dist/keycloak.min.js\"></script>\n  <script>\n    // Config & URLs\n    const KEYCLOAK_CONFIG = {\n      url: 'https://keycloak.cybertech.app',\n      realm: 'EPIC',\n      clientId: 'powerpack'\n    };\n\n    const MAIN_APP_URL = 'https://xl.epicpc.com/webhook/powerpack';  // Your app's main page and redirect URI in Keycloak\n    const INSTALLED_APP_BASE_URL = 'https://xl.epicpc.com/webhook/e225c70c-13d2-4902-bef9-977e3207b715';  // Installed app base URL\n    const ENTITY = 'e225c70c-13d2-4902-bef9-977e3207b715';\n\n    const STORAGE_KEY = 'epic_powerpack_authenticated_url';\n\n    let keycloak;\n\n    async function initKeycloak() {\n      keycloak = new Keycloak(KEYCLOAK_CONFIG);\n      try {\n        const authenticated = await keycloak.init({\n          onLoad: 'login-required',\n          redirectUri: MAIN_APP_URL\n        });\n\n        if (!authenticated) {\n          alert('Authentication failed, please refresh and try again.');\n          return;\n        }\n\n        const user = keycloak.tokenParsed?.preferred_username || 'unknown';\n\n        const url = new URL(INSTALLED_APP_BASE_URL);\n        url.searchParams.set('standalone', 'yes');\n        url.searchParams.set('entity', ENTITY);\n        url.searchParams.set('user', user);\n\n        localStorage.setItem(STORAGE_KEY, url.toString());\n\n        const installBtn = document.getElementById('installBtn');\n        if (installBtn) installBtn.style.display = 'inline-flex';\n\n      } catch (err) {\n        console.error('Keycloak init error:', err);\n        alert('Authentication or initialization error.');\n      }\n    }\n\n    function launchApp() {\n      const url = localStorage.getItem(STORAGE_KEY);\n      if (url) {\n        window.location.href = url;\n      } else {\n        alert('No authenticated session found, please refresh and login again.');\n      }\n    }\n\n    // PWA install & confetti code\n    let deferredPrompt = null;\n\n    function isIos() {\n      const ua = window.navigator.userAgent.toLowerCase();\n      return /iphone|ipad|ipod/.test(ua);\n    }\n\n    function isInStandaloneMode() {\n      return (\n        ('standalone' in window.navigator && window.navigator.standalone) ||\n        window.matchMedia('(display-mode: standalone)').matches\n      );\n    }\n\n    window.addEventListener('beforeinstallprompt', (e) => {\n      e.preventDefault();\n      deferredPrompt = e;\n      // Show install button only after successful auth\n    });\n\n    window.addEventListener('load', () => {\n      initKeycloak();\n\n      if (isIos() && !isInStandaloneMode()) {\n        const installBtn = document.getElementById('installBtn');\n        if (installBtn) installBtn.style.display = 'inline-flex';\n      }\n    });\n\n    document.addEventListener('DOMContentLoaded', () => {\n      const btn = document.getElementById('installBtn');\n      const modal = document.getElementById('installModal');\n      const closeBtn = document.getElementById('closeModalBtn');\n\n      if (!btn || !modal || !closeBtn) {\n        console.error('Missing required DOM elements for event listeners');\n        return;\n      }\n\n      btn.addEventListener('click', async () => {\n        const rect = btn.getBoundingClientRect();\n        runConfetti(rect.left + rect.width / 2, rect.top + rect.height / 2);\n\n        launchApp();\n\n        if (isIos() && !isInStandaloneMode()) {\n          modal.style.display = 'flex';\n          modal.focus();\n        } else if (deferredPrompt) {\n          deferredPrompt.prompt();\n          const { outcome } = await deferredPrompt.userChoice;\n          deferredPrompt = null;\n          btn.style.display = 'none';\n        } else {\n          modal.style.display = 'flex';\n          modal.focus();\n        }\n      });\n\n      closeBtn.addEventListener('click', () => {\n        modal.style.display = 'none';\n        btn.focus();\n      });\n\n      window.addEventListener('keydown', (e) => {\n        if (e.key === 'Escape' && modal.style.display === 'flex') {\n          modal.style.display = 'none';\n          btn.focus();\n        }\n      });\n    });\n\n    // Confetti functions\n    function createConfettiParticle(x, y) {\n      const particle = document.createElement('div');\n      const size = Math.floor(Math.random() * 8) + 6 + 'px';\n      particle.style.position = 'fixed';\n      particle.style.left = x + 'px';\n      particle.style.top = y + 'px';\n      particle.style.width = size;\n      particle.style.height = size;\n      particle.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 70%)`;\n      particle.style.borderRadius = '50%';\n      particle.style.pointerEvents = 'none';\n      particle.style.zIndex = 11000;\n      particle.style.opacity = 1;\n      particle.style.transform = `translate(0, 0)`;\n      particle.style.willChange = 'transform, opacity';\n\n      const directionX = (Math.random() - 0.5) * 200;\n      const directionY = (Math.random() - 1) * 200;\n\n      let start = null;\n      function animate(timestamp) {\n        if (!start) start = timestamp;\n        const progress = timestamp - start;\n        const easeOut = 1 - Math.pow(1 - progress / 1000, 3);\n\n        particle.style.transform = `translate(${directionX * easeOut}px, ${directionY * easeOut}px)`;\n        particle.style.opacity = String(1 - easeOut);\n\n        if (progress < 1000) {\n          requestAnimationFrame(animate);\n        } else {\n          particle.remove();\n        }\n      }\n\n      requestAnimationFrame(animate);\n      return particle;\n    }\n\n    function runConfetti(x, y) {\n      const container = document.getElementById('confetti-wrapper');\n      for (let i = 0; i < 30; i++) {\n        const particle = createConfettiParticle(x, y);\n        container.appendChild(particle);\n      }\n    }\n  </script>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        2120,
        -200
      ],
      "id": "36586211-3e4a-4f9e-869e-d7be19923284",
      "name": "Respond to Webhook6"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>EPIC Power Pack</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <meta name=\"theme-color\" content=\"#000000\" />\n  <!-- Windows and Apple meta tags (unchanged) -->\n  <meta name=\"msapplication-TileColor\" content=\"#000000\" />\n  <meta name=\"msapplication-TileImage\" content=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\" />\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n  <meta name=\"apple-mobile-web-app-title\" content=\"EPIC Power Pack\" />\n  <link rel=\"apple-touch-icon\" href=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\" />\n  <link href=\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\" rel=\"stylesheet\" />\n  <style>\n    /* Your existing CSS */\n    body {\n      margin: 0; padding: 0;\n      background: url(\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\") no-repeat center center fixed;\n      background-size: cover;\n      font-family: \"Roboto\", sans-serif;\n      color: #fff;\n      overflow-x: hidden;\n    }\n    .overlay {\n      background-color: rgba(0,0,0,0.6);\n      padding: 30px;\n      margin: 50px auto;\n      max-width: 600px;\n      border-radius: 10px;\n      text-align: center;\n    }\n    h1 {\n      margin-bottom: 0.3em;\n      font-size: 2em;\n      text-shadow: 2px 2px 4px rgba(0,0,0,0.7);\n    }\n    h2 {\n      margin-top: 0;\n      margin-bottom: 1em;\n      font-size: 1.2em;\n      font-weight: normal;\n      text-shadow: 2px 2px 4px rgba(0,0,0,0.7);\n    }\n    #installBtn {\n      display: none; /* hidden initially; show after auth */\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      margin: 20px auto;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: #111;\n      border: 2px solid #0ff;\n      cursor: pointer;\n      box-shadow: 0 0 10px #0ff;\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n      position: relative;\n      overflow: hidden;\n      animation: pulse 2s infinite;\n      user-select: none;\n      display: flex;\n    }\n    @keyframes pulse {\n      0% { box-shadow: 0 0 10px #0ff; }\n      50% { box-shadow: 0 0 20px #0ff; }\n      100% { box-shadow: 0 0 10px #0ff; }\n    }\n    #installBtn:hover { box-shadow: 0 0 30px #0ff; }\n    #installBtn:active { transform: scale(0.95); }\n    #installBtn:active::after {\n      content: \"\";\n      position: absolute;\n      width: 120px; height: 120px;\n      border-radius: 50%;\n      background: rgba(0,255,255,0.2);\n      animation: ripple 0.6s ease-out;\n      top: 0; left: 0;\n    }\n    @keyframes ripple {\n      from { transform: scale(0); opacity: 1; }\n      to { transform: scale(1.5); opacity: 0;}\n    }\n    .power-icon {\n      width: 60px;\n      height: 60px;\n    }\n    .btn-text {\n      font-size: 16px;\n      color: #0ff;\n      margin-top: 5px;\n      text-shadow: 1px 1px 3px rgba(0,0,0,0.7);\n      font-family: \"Roboto\", sans-serif;\n    }\n    /* Modal and confetti styles omitted for brevity - copy from your original */\n    /* ... */\n  </style>\n</head>\n<body>\n  <div class=\"overlay\" role=\"main\">\n    <h1>EPIC Power Pack</h1>\n    <h2>Turbocharge your Superpower ðŸš€</h2>\n\n    <button id=\"installBtn\" class=\"button-fancy\" aria-label=\"Activate Power On\">\n      <svg class=\"power-icon\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\" role=\"img\">\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\"></circle>\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\"></line>\n      </svg>\n      <span class=\"btn-text\">Power On</span>\n    </button>\n  </div>\n\n  <!-- Install modal and confetti wrapper HTML... (copy as is from your original) -->\n\n  <script src=\"https://cdn.jsdelivr.net/npm/keycloak-js@latest/dist/keycloak.min.js\"></script>\n  <script>\n    const KEYCLOAK_CONFIG = {\n      url: 'https://keycloak.cybertech.app',\n      realm: 'EPIC',\n      clientId: 'powerpack'\n    };\n    const MAIN_APP_URL = 'https://xl.epicpc.com/webhook/powerpack';\n    const INSTALLED_APP_BASE_URL = 'https://xl.epicpc.com/webhook/e225c70c-13d2-4902-bef9-977e3207b715';\n    const ENTITY = 'e225c70c-13d2-4902-bef9-977e3207b715';\n\n    const STORAGE_KEY = 'epic_powerpack_authenticated_url';\n\n    let keycloak;\n\n    async function initKeycloak() {\n      keycloak = new Keycloak(KEYCLOAK_CONFIG);\n      try {\n        // Use \"check-sso\" to try silent login, no forced redirect\n        const authenticated = await keycloak.init({\n          onLoad: 'check-sso',\n          silentCheckSsoRedirectUri: window.location.origin + '/silent-check-sso.html',\n          redirectUri: MAIN_APP_URL,\n          pkceMethod: 'S256'\n        });\n\n        if (authenticated) {\n          const user = keycloak.tokenParsed?.preferred_username || 'unknown';\n\n          const url = new URL(INSTALLED_APP_BASE_URL);\n          url.searchParams.set('standalone', 'yes');\n          url.searchParams.set('entity', ENTITY);\n          url.searchParams.set('user', user);\n\n          localStorage.setItem(STORAGE_KEY, url.toString());\n\n          document.getElementById('installBtn').style.display = 'inline-flex';\n        }\n        // If not authenticated, just remain on page. You may trigger login on button click if you prefer.\n      } catch (err) {\n        console.error('Keycloak init error:', err);\n        alert('Error initializing authentication.');\n      }\n    }\n\n    function launchApp() {\n      const url = localStorage.getItem(STORAGE_KEY);\n      if(url) {\n        window.location.href = url;\n      } else {\n        alert('No authenticated session available. Please login and try again.');\n      }\n    }\n\n    // Wait for DOM to be ready\n    document.addEventListener('DOMContentLoaded', () => {\n      initKeycloak();\n\n      const btn = document.getElementById('installBtn');\n      if(btn) {\n        btn.addEventListener('click', () => {\n          launchApp();\n        });\n      }\n    });\n\n    // Add your confetti and install modal code as you had it before (unchanged)\n    // ...\n  </script>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        2780,
        -40
      ],
      "id": "c8c462f5-7fe5-4f8a-a046-19c5bf09f3ef",
      "name": "Respond to Webhook9"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>EPIC Power Pack</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <meta name=\"theme-color\" content=\"#000000\" />\n\n  <!-- Windows compatibility meta tags -->\n  <meta name=\"msapplication-TileColor\" content=\"#000000\" />\n  <meta\n    name=\"msapplication-TileImage\"\n    content=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\"\n  />\n\n  <!-- Apple-specific meta tags for native-like appearance -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n  <meta name=\"apple-mobile-web-app-title\" content=\"EPIC Power Pack\" />\n  <link\n    rel=\"apple-touch-icon\"\n    href=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\"\n  />\n\n  <!-- Google Fonts -->\n  <link href=\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\" rel=\"stylesheet\" />\n\n  <!-- Redirect if app is installed to the standalone URL -->\n  <script>\n    if (\n      window.matchMedia(\"(display-mode: standalone)\").matches ||\n      window.navigator.standalone === true\n    ) {\n      window.location.href =\n        \"https://xl.epicpc.com/webhook/powerpack?standalone=yes\";\n    }\n  </script>\n\n  <script>\n    let deferredPrompt = null;\n\n    function isIos() {\n      const ua = window.navigator.userAgent.toLowerCase();\n      return /iphone|ipad|ipod/.test(ua);\n    }\n\n    function isInStandaloneMode() {\n      return (\n        (\"standalone\" in window.navigator && window.navigator.standalone) ||\n        window.matchMedia(\"(display-mode: standalone)\").matches\n      );\n    }\n\n    // Dynamically add manifest with start_url including standalone=yes\n    const manifestData = {\n      name: \"EPIC Power Pack\",\n      short_name: \"PowerPack\",\n      start_url: \"/webhook/powerpack?standalone=yes\",\n      display: \"standalone\",\n      background_color: \"#ffffff\",\n      theme_color: \"#000000\",\n      icons: [\n        {\n          src: \"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\",\n          sizes: \"512x512\",\n          type: \"image/png\",\n        },\n      ],\n    };\n    const manifestBlob = new Blob([JSON.stringify(manifestData)], {\n      type: \"application/json\",\n    });\n    const manifestURL = URL.createObjectURL(manifestBlob);\n    const manifestLink = document.createElement(\"link\");\n    manifestLink.rel = \"manifest\";\n    manifestLink.href = manifestURL;\n    document.head.appendChild(manifestLink);\n\n    // Register a minimal service worker\n    if (\"serviceWorker\" in navigator) {\n      const swCode = `\n        self.addEventListener('install', event => { self.skipWaiting(); });\n        self.addEventListener('activate', event => {});\n      `;\n      const blob = new Blob([swCode], { type: \"text/javascript\" });\n      const swURL = URL.createObjectURL(blob);\n      navigator.serviceWorker\n        .register(swURL)\n        .catch((err) => console.error(\"Service Worker registration failed:\", err));\n    }\n\n    // Listen for beforeinstallprompt event on supported platforms\n    window.addEventListener(\"beforeinstallprompt\", (e) => {\n      e.preventDefault();\n      deferredPrompt = e;\n      document.getElementById(\"installBtn\").style.display = \"inline-flex\";\n    });\n\n    window.addEventListener(\"load\", () => {\n      if (isIos() && !isInStandaloneMode()) {\n        // Show install button on iOS if not installed\n        document.getElementById(\"installBtn\").style.display = \"inline-flex\";\n      } else if (deferredPrompt) {\n        // Show install button if prompt available (Android etc)\n        document.getElementById(\"installBtn\").style.display = \"inline-flex\";\n      }\n    });\n\n    // Confetti helper functions\n    function createConfettiParticle(x, y) {\n      const particle = document.createElement(\"div\");\n      const size = Math.floor(Math.random() * 8) + 6 + \"px\";\n      particle.style.position = \"fixed\";\n      particle.style.left = x + \"px\";\n      particle.style.top = y + \"px\";\n      particle.style.width = size;\n      particle.style.height = size;\n      particle.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 70%)`;\n      particle.style.borderRadius = \"50%\";\n      particle.style.pointerEvents = \"none\";\n      particle.style.zIndex = 11000;\n      particle.style.opacity = 1;\n      particle.style.transform = `translate(0, 0)`;\n      particle.style.willChange = \"transform, opacity\";\n\n      const directionX = (Math.random() - 0.5) * 200;\n      const directionY = (Math.random() - 1) * 200;\n\n      let start = null;\n      function animate(timestamp) {\n        if (!start) start = timestamp;\n        const progress = timestamp - start;\n        const easeOut = 1 - Math.pow(1 - progress / 1000, 3);\n\n        particle.style.transform = `translate(${directionX * easeOut}px, ${directionY * easeOut}px)`;\n        particle.style.opacity = String(1 - easeOut);\n\n        if (progress < 1000) {\n          requestAnimationFrame(animate);\n        } else {\n          particle.remove();\n        }\n      }\n\n      requestAnimationFrame(animate);\n      return particle;\n    }\n\n    function runConfetti(x, y) {\n      const container = document.getElementById(\"confetti-wrapper\");\n      for (let i = 0; i < 30; i++) {\n        const particle = createConfettiParticle(x, y);\n        container.appendChild(particle);\n      }\n    }\n\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      const btn = document.getElementById(\"installBtn\");\n      const modal = document.getElementById(\"installModal\");\n      const closeBtn = document.getElementById(\"closeModalBtn\");\n\n      btn.addEventListener(\"click\", async (e) => {\n        const rect = btn.getBoundingClientRect();\n        runConfetti(rect.left + rect.width / 2, rect.top + rect.height / 2);\n\n        if (isIos() && !isInStandaloneMode()) {\n          modal.style.display = \"flex\";\n          modal.focus();\n        } else if (deferredPrompt) {\n          deferredPrompt.prompt();\n          const { outcome } = await deferredPrompt.userChoice;\n          console.log(\"User response to install prompt:\", outcome);\n          deferredPrompt = null;\n          btn.style.display = \"none\";\n        } else {\n          modal.style.display = \"flex\";\n          modal.focus();\n        }\n      });\n\n      closeBtn.addEventListener(\"click\", () => {\n        modal.style.display = \"none\";\n        btn.focus();\n      });\n\n      window.addEventListener(\"keydown\", (e) => {\n        if (e.key === \"Escape\" && modal.style.display === \"flex\") {\n          modal.style.display = \"none\";\n          btn.focus();\n        }\n      });\n    });\n  </script>\n\n  <style>\n    body {\n      margin: 0;\n      padding: 0;\n      background: url(\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\")\n        no-repeat center center fixed;\n      background-size: cover;\n      font-family: \"Roboto\", sans-serif;\n      color: #fff;\n      overflow-x: hidden;\n    }\n    .overlay {\n      background-color: rgba(0, 0, 0, 0.6);\n      padding: 30px;\n      margin: 50px auto;\n      max-width: 600px;\n      border-radius: 10px;\n      text-align: center;\n    }\n    h1 {\n      margin-bottom: 0.3em;\n      font-size: 2em;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n    h2 {\n      margin-top: 0;\n      margin-bottom: 1em;\n      font-size: 1.2em;\n      font-weight: normal;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n    #installBtn {\n      display: none;\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      margin: 20px auto;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: #111;\n      border: 2px solid #0ff;\n      cursor: pointer;\n      box-shadow: 0 0 10px #0ff;\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n      position: relative;\n      overflow: hidden;\n      animation: pulse 2s infinite;\n      user-select: none;\n    }\n    @keyframes pulse {\n      0% {\n        box-shadow: 0 0 10px #0ff;\n      }\n      50% {\n        box-shadow: 0 0 20px #0ff;\n      }\n      100% {\n        box-shadow: 0 0 10px #0ff;\n      }\n    }\n    #installBtn:hover {\n      box-shadow: 0 0 30px #0ff;\n    }\n    #installBtn:active {\n      transform: scale(0.95);\n    }\n    #installBtn:active::after {\n      content: \"\";\n      position: absolute;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: rgba(0, 255, 255, 0.2);\n      animation: ripple 0.6s ease-out;\n      top: 0;\n      left: 0;\n    }\n    @keyframes ripple {\n      from {\n        transform: scale(0);\n        opacity: 1;\n      }\n      to {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n    }\n    .power-icon {\n      width: 60px;\n      height: 60px;\n    }\n    .btn-text {\n      font-size: 16px;\n      color: #0ff;\n      margin-top: 5px;\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n      font-family: \"Roboto\", sans-serif;\n    }\n    #installModal {\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      background: rgba(0, 0, 0, 0.9);\n      align-items: center;\n      justify-content: center;\n      z-index: 10000;\n      padding: 20px;\n      box-sizing: border-box;\n      overflow-y: auto;\n      flex-direction: column;\n    }\n    #installModal.flex {\n      display: flex;\n    }\n    #installModal .modal-content {\n      background: #222;\n      border-radius: 10px;\n      max-width: 460px;\n      width: 100%;\n      color: #fff;\n      font-size: 16px;\n      padding: 25px 30px;\n      box-sizing: border-box;\n    }\n    #installModal h3 {\n      margin-top: 0;\n      text-align: center;\n      font-size: 1.6em;\n    }\n    #installModal ul {\n      list-style: none;\n      padding: 0;\n      margin: 15px 0 0 0;\n    }\n    #installModal li {\n      margin-bottom: 20px;\n      display: flex;\n      align-items: center;\n      gap: 14px;\n      line-height: 1.3;\n    }\n    #installModal li svg {\n      width: 28px;\n      height: 28px;\n      flex-shrink: 0;\n      stroke: #0ff;\n      fill: none;\n    }\n    #installModal .close-btn {\n      margin-top: 25px;\n      width: 100%;\n      background: #0ff;\n      border: none;\n      padding: 12px 0;\n      font-weight: bold;\n      color: #000;\n      border-radius: 5px;\n      cursor: pointer;\n      font-size: 16px;\n      transition: background 0.2s ease;\n    }\n    #installModal .close-btn:hover,\n    #installModal .close-btn:focus {\n      background: #33ffff;\n      outline: none;\n    }\n    /* Confetti container */\n    #confetti-wrapper {\n      pointer-events: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      overflow: visible;\n      z-index: 11000;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"overlay\" role=\"main\">\n    <h1>EPIC Power Pack</h1>\n    <h2>Turbocharge your Superpower ðŸš€</h2>\n\n    <button id=\"installBtn\" class=\"button-fancy\" aria-label=\"Activate Power On\">\n      <svg\n        class=\"power-icon\"\n        viewBox=\"0 0 64 64\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        aria-hidden=\"true\"\n        focusable=\"false\"\n        role=\"img\"\n      >\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\"></circle>\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\"></line>\n      </svg>\n      <span class=\"btn-text\">Power On</span>\n    </button>\n  </div>\n\n  <div id=\"installModal\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modalTitle\" tabindex=\"-1\">\n    <div class=\"modal-content\">\n      <h3 id=\"modalTitle\">Install Instructions</h3>\n      <ul>\n        <li>\n          <svg viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\">\n            <rect x=\"3\" y=\"11\" width=\"18\" height=\"8\" rx=\"2\" ry=\"2\"/>\n            <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"/>\n          </svg>\n          <strong>Android Chrome/Edge:</strong> Tap the browser menu and select <em>Add to Home screen</em>.\n        </li>\n        <li>\n          <svg viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\">\n            <path d=\"M18 19a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V10a2 2 0 0 1 2-2h3l2-3 2 3h3a2 2 0 0 1 2 2z\"/>\n          </svg>\n          <strong>iOS Safari:</strong> Tap the <em>Share</em> icon (the square with arrow) then tap <em>Add to Home Screen</em>.\n        </li>\n        <li>\n          <svg viewBox=\"0 0 24 24\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\">\n            <rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"/>\n            <line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\"/>\n            <line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\"/>\n          </svg>\n          <strong>Desktop Browsers:</strong> Use the browser menu and select <em>Install App</em> or <em>Add to Desktop</em> if available.\n        </li>\n      </ul>\n      <button id=\"closeModalBtn\" class=\"close-btn\" aria-label=\"Close install instructions\">Close</button>\n    </div>\n  </div>\n\n  <div id=\"confetti-wrapper\"></div>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        3000,
        -20
      ],
      "id": "6de9a5e3-3848-4edf-b312-2f95f2c4527d",
      "name": "Respond to Webhook10"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>EPIC Power Pack</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <meta name=\"theme-color\" content=\"#000000\" />\n\n  <!-- Windows compatibility meta tags -->\n  <meta name=\"msapplication-TileColor\" content=\"#000000\" />\n  <meta name=\"msapplication-TileImage\" content=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\" />\n\n  <!-- Apple-specific meta tags -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n  <meta name=\"apple-mobile-web-app-title\" content=\"EPIC Power Pack\" />\n  <link rel=\"apple-touch-icon\" href=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\" />\n\n  <!-- Google Fonts -->\n  <link href=\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\" rel=\"stylesheet\" />\n\n  <script>\n    // Redirect if running standalone PWA (browser or iOS)\n    if (\n      window.matchMedia('(display-mode: standalone)').matches ||\n      window.navigator.standalone === true\n    ) {\n      window.location.href = \"https://xl.epicpc.com/webhook/powerpack?standalone=yes\";\n    }\n  </script>\n\n  <script>\n    let deferredPrompt = null;\n\n    // Detect iOS devices\n    function isIos() {\n      const ua = window.navigator.userAgent.toLowerCase();\n      return /iphone|ipad|ipod/.test(ua);\n    }\n\n    // Detect standalone mode in iOS Safari\n    function isInStandaloneMode() {\n      return ('standalone' in window.navigator) && window.navigator.standalone;\n    }\n\n    // Dynamically add manifest\n    const manifestData = {\n      name: \"EPIC Power Pack\",\n      short_name: \"PowerPack\",\n      start_url: \".\",\n      display: \"standalone\",\n      background_color: \"#ffffff\",\n      theme_color: \"#000000\",\n      icons: [\n        {\n          src: \"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\",\n          sizes: \"512x512\",\n          type: \"image/png\"\n        }\n      ]\n    };\n    const manifestBlob = new Blob([JSON.stringify(manifestData)], { type: 'application/json' });\n    const manifestURL = URL.createObjectURL(manifestBlob);\n    const manifestLink = document.createElement('link');\n    manifestLink.rel = 'manifest';\n    manifestLink.href = manifestURL;\n    document.head.appendChild(manifestLink);\n\n    // Listen for beforeinstallprompt\n    window.addEventListener('beforeinstallprompt', (e) => {\n      e.preventDefault();\n      deferredPrompt = e;\n      // Show buttons according to screen\n      if (window.innerWidth <= 768) {\n        document.getElementById('installBtnMobile').style.display = 'inline-flex';\n      } else {\n        document.getElementById('installBtnWindows').style.display = 'inline-flex';\n      }\n    });\n\n    // Register minimal service worker\n    if ('serviceWorker' in navigator) {\n      const swCode = `\n        self.addEventListener('install', event => {\n          console.log('Service Worker: Installed');\n          self.skipWaiting();\n        });\n        self.addEventListener('activate', event => {\n          console.log('Service Worker: Activated');\n        });\n      `;\n      const blob = new Blob([swCode], { type: 'text/javascript' });\n      const swURL = URL.createObjectURL(blob);\n      navigator.serviceWorker.register(swURL)\n        .then(reg => console.log('Service Worker registered with scope:', reg.scope))\n        .catch(err => console.error('Service Worker registration failed:', err));\n    }\n\n    // Show iOS modal or install buttons on load\n    window.addEventListener('load', () => {\n      if (isIos() && !isInStandaloneMode()) {\n        setTimeout(() => showInstallModal(), 1000);\n      } else if (deferredPrompt) {\n        if (window.innerWidth <= 768) {\n          document.getElementById('installBtnMobile').style.display = 'inline-flex';\n        } else {\n          document.getElementById('installBtnWindows').style.display = 'inline-flex';\n        }\n      }\n    });\n\n    // Show shared install modal\n    function showInstallModal() {\n      const modal = document.getElementById('installModal');\n      modal.style.display = 'flex';\n      modal.style.alignItems = 'center';\n      modal.style.justifyContent = 'center';\n      // For accessibility\n      modal.setAttribute('aria-hidden', 'false');\n      modal.focus();\n    }\n\n    // Hide shared install modal\n    function closeInstallModal() {\n      const modal = document.getElementById('installModal');\n      modal.style.display = 'none';\n      modal.setAttribute('aria-hidden', 'true');\n    }\n\n    // Install button behavior\n    function installApp() {\n      if (isIos() && !isInStandaloneMode()) {\n        showInstallModal();\n      } else if (deferredPrompt) {\n        deferredPrompt.prompt();\n        deferredPrompt.userChoice.then((choiceResult) => {\n          console.log('User response to install prompt:', choiceResult.outcome);\n          deferredPrompt = null;\n          document.getElementById('installBtnMobile').style.display = 'none';\n          document.getElementById('installBtnWindows').style.display = 'none';\n        });\n      }\n    }\n\n    // Attach install button event handlers after DOM loads\n    window.addEventListener('DOMContentLoaded', () => {\n      document.querySelectorAll('.button-fancy.install-btn').forEach(btn => {\n        btn.addEventListener('click', installApp);\n      });\n      // Attach modal close on button\n      document.getElementById('installModalCloseBtn').addEventListener('click', closeInstallModal);\n\n      // Close modal on Escape key\n      window.addEventListener('keydown', e => {\n        const modal = document.getElementById('installModal');\n        if (e.key === 'Escape' && modal.style.display === 'flex') {\n          closeInstallModal();\n        }\n      });\n\n      // Power button (refresh page) is #powerBtn\n      const powerBtn = document.getElementById('powerBtn');\n      if (powerBtn) {\n        powerBtn.addEventListener('click', () => {\n          location.reload();\n        });\n      }\n    });\n  </script>\n\n  <style>\n    body {\n      margin: 0;\n      padding: 0;\n      background: url('https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png') no-repeat center center fixed;\n      background-size: cover;\n      font-family: 'Roboto', sans-serif;\n      color: #fff;\n    }\n\n    .overlay {\n      background-color: rgba(0, 0, 0, 0.5);\n      padding: 30px;\n      margin: 50px auto;\n      width: 90%;\n      max-width: 600px;\n      border-radius: 10px;\n      text-align: center;\n    }\n\n    h1 {\n      margin-bottom: 0.3em;\n      font-size: 2em;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n\n    h2 {\n      margin-top: 0;\n      margin-bottom: 1em;\n      font-size: 1.2em;\n      font-weight: normal;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n\n    .button-fancy {\n      display: none; /* Initially hidden */\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      margin: 10px auto;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: #111;\n      border: 2px solid #0ff;\n      cursor: pointer;\n      box-shadow: 0 0 10px #0ff;\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n      position: relative;\n      overflow: hidden;\n      animation: pulse 2s infinite;\n    }\n\n    @keyframes pulse {\n      0% {\n        box-shadow: 0 0 10px #0ff;\n      }\n      50% {\n        box-shadow: 0 0 20px #0ff;\n      }\n      100% {\n        box-shadow: 0 0 10px #0ff;\n      }\n    }\n\n    .button-fancy:hover {\n      box-shadow: 0 0 30px #0ff;\n    }\n\n    .button-fancy:active {\n      transform: scale(0.95);\n    }\n\n    .button-fancy:active::after {\n      content: \"\";\n      position: absolute;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: rgba(0, 255, 255, 0.2);\n      animation: ripple 0.6s ease-out;\n      top: 0;\n      left: 0;\n    }\n\n    @keyframes ripple {\n      from {\n        transform: scale(0);\n        opacity: 1;\n      }\n      to {\n        transform: scale(1.5);\n        opacity: 0;\n      }\n    }\n\n    .power-icon {\n      width: 60px;\n      height: 60px;\n    }\n\n    .btn-text {\n      font-size: 16px;\n      color: #0ff;\n      font-family: 'Roboto', sans-serif;\n      margin-top: 5px;\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n    }\n\n    /* Modal styles */\n    #installModal {\n      display: none;\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0, 0, 0, 0.8);\n      align-items: center;\n      justify-content: center;\n      z-index: 1000;\n      outline: none;\n    }\n\n    #installModal .modal-content {\n      background: #222;\n      padding: 20px;\n      border-radius: 10px;\n      text-align: center;\n      max-width: 90%;\n      color: #fff;\n    }\n\n    #installModal .modal-content h3 {\n      margin-top: 0;\n    }\n\n    #installModal .close-btn {\n      background: #0ff;\n      border: none;\n      padding: 10px 20px;\n      margin-top: 15px;\n      border-radius: 5px;\n      cursor: pointer;\n      color: #000;\n      font-size: 16px;\n    }\n\n    /* Media queries: only one install button visible per screen width */\n    @media only screen and (max-width: 768px) {\n      #installBtnMobile {\n        display: none; /* will be shown by JS */\n      }\n      #installBtnWindows {\n        display: none;\n      }\n      #powerBtn {\n        display: inline-flex;\n      }\n    }\n\n    @media only screen and (min-width: 769px) {\n      #installBtnMobile {\n        display: none;\n      }\n      #installBtnWindows {\n        display: none; /* shown by JS */\n      }\n      #powerBtn {\n        display: inline-flex;\n      }\n    }\n  </style>\n</head>\n<body>\n  <div class=\"overlay\">\n    <h1>EPIC Power Pack</h1>\n    <h2>Turbocharge your Superpower ðŸš€</h2>\n\n    <!-- Install Buttons -->\n    <button id=\"installBtnMobile\" class=\"button-fancy install-btn\" aria-label=\"Install EPIC Power Pack on mobile devices\" type=\"button\" style=\"display:none;\">\n      <svg class=\"power-icon\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\" />\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\" />\n      </svg>\n      <span class=\"btn-text\">Install</span>\n    </button>\n\n    <button id=\"installBtnWindows\" class=\"button-fancy install-btn\" aria-label=\"Install EPIC Power Pack on desktop devices\" type=\"button\" style=\"display:none;\">\n      <svg class=\"power-icon\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\" />\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\" />\n      </svg>\n      <span class=\"btn-text\">Install</span>\n    </button>\n\n    <!-- Power Button: refresh page -->\n    <button id=\"powerBtn\" class=\"button-fancy\" aria-label=\"Power button: Refresh Page\" type=\"button\" style=\"display: inline-flex;\">\n      <svg class=\"power-icon\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\" />\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\" />\n      </svg>\n      <span class=\"btn-text\">Power</span>\n    </button>\n  </div>\n\n  <!-- Shared Modal for Install Instructions -->\n  <div id=\"installModal\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" aria-hidden=\"true\">\n    <div class=\"modal-content\">\n      <h3>Install Instructions</h3>\n      <p>To install this app on your iOS device, tap the <strong>Share</strong> icon in Safari or Chrome, then select <strong>Add to Home Screen</strong>.</p>\n      <button id=\"installModalCloseBtn\" class=\"close-btn\" type=\"button\">OK</button>\n    </div>\n  </div>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        660,
        0
      ],
      "id": "a8e53b14-fe1d-41fb-a9dd-07d856794dde",
      "name": "Respond to Webhook11"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>EPIC Power Pack</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <meta name=\"theme-color\" content=\"#000000\" />\n\n  <!-- Windows compatibility meta tags -->\n  <meta name=\"msapplication-TileColor\" content=\"#000000\" />\n  <meta name=\"msapplication-TileImage\" content=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\" />\n\n  <!-- Apple-specific meta tags -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n  <meta name=\"apple-mobile-web-app-title\" content=\"EPIC Power Pack\" />\n  <link rel=\"apple-touch-icon\" href=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\" />\n\n  <!-- Google Fonts -->\n  <link href=\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\" rel=\"stylesheet\" />\n\n  <script>\n    // Redirect if running standalone PWA (browser or iOS)\n    if (\n      window.matchMedia('(display-mode: standalone)').matches ||\n      window.navigator.standalone === true\n    ) {\n      window.location.href = \"https://xl.epicpc.com/webhook/powerpack?standalone=yes\";\n    }\n  </script>\n\n  <script>\n    let deferredPrompt = null;\n\n    function isIos() {\n      const ua = window.navigator.userAgent.toLowerCase();\n      return /iphone|ipad|ipod/.test(ua);\n    }\n\n    function isInStandaloneMode() {\n      return ('standalone' in window.navigator) && window.navigator.standalone;\n    }\n\n    // Add manifest dynamically\n    const manifestData = {\n      name: \"EPIC Power Pack\",\n      short_name: \"PowerPack\",\n      start_url: \".\",\n      display: \"standalone\",\n      background_color: \"#ffffff\",\n      theme_color: \"#000000\",\n      icons: [\n        {\n          src: \"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\",\n          sizes: \"512x512\",\n          type: \"image/png\"\n        }\n      ]\n    };\n    const manifestBlob = new Blob([JSON.stringify(manifestData)], { type: \"application/json\" });\n    const manifestURL = URL.createObjectURL(manifestBlob);\n    const manifestLink = document.createElement(\"link\");\n    manifestLink.rel = \"manifest\";\n    manifestLink.href = manifestURL;\n    document.head.appendChild(manifestLink);\n\n    window.addEventListener(\"beforeinstallprompt\", (e) => {\n      e.preventDefault();\n      deferredPrompt = e;\n      if (window.innerWidth <= 768) {\n        document.getElementById(\"installBtnMobile\").style.display = \"inline-flex\";\n      } else {\n        document.getElementById(\"installBtnWindows\").style.display = \"inline-flex\";\n      }\n    });\n\n    // Minimal Service Worker\n    if (\"serviceWorker\" in navigator) {\n      const swCode = `\n        self.addEventListener('install', event => {\n          console.log('Service Worker: Installed');\n          self.skipWaiting();\n        });\n        self.addEventListener('activate', event => {\n          console.log('Service Worker: Activated');\n        });\n      `;\n      const blob = new Blob([swCode], { type: \"text/javascript\" });\n      const swURL = URL.createObjectURL(blob);\n      navigator.serviceWorker.register(swURL)\n        .then(reg => console.log(\"Service Worker registered with scope:\", reg.scope))\n        .catch(err => console.error(\"Service Worker registration failed:\", err));\n    }\n\n    function showInstallModal() {\n      const modal = document.getElementById(\"installModal\");\n      modal.style.display = \"flex\";\n      modal.setAttribute(\"aria-hidden\", \"false\");\n      modal.focus();\n    }\n\n    function closeInstallModal() {\n      const modal = document.getElementById(\"installModal\");\n      modal.style.display = \"none\";\n      modal.setAttribute(\"aria-hidden\", \"true\");\n    }\n\n    function installApp() {\n      if (isIos() && !isInStandaloneMode()) {\n        showInstallModal();\n      } else if (deferredPrompt) {\n        deferredPrompt.prompt();\n        deferredPrompt.userChoice.then((choiceResult) => {\n          console.log(\"User response to install prompt:\", choiceResult.outcome);\n          deferredPrompt = null;\n          document.getElementById(\"installBtnMobile\").style.display = \"none\";\n          document.getElementById(\"installBtnWindows\").style.display = \"none\";\n        });\n      }\n    }\n\n    window.addEventListener(\"load\", () => {\n      if (isIos() && !isInStandaloneMode()) {\n        setTimeout(() => {\n          showInstallModal();\n        }, 1000);\n      } else if (deferredPrompt) {\n        if (window.innerWidth <= 768) {\n          document.getElementById(\"installBtnMobile\").style.display = \"inline-flex\";\n        } else {\n          document.getElementById(\"installBtnWindows\").style.display = \"inline-flex\";\n        }\n      }\n    });\n\n    window.addEventListener(\"DOMContentLoaded\", () => {\n      // Attach install buttons\n      document.querySelectorAll(\".button-fancy.install-btn\").forEach(btn => {\n        btn.addEventListener(\"click\", installApp);\n      });\n\n      // Attach modal close\n      document.getElementById(\"installModalCloseBtn\").addEventListener(\"click\", closeInstallModal);\n\n      // Attach \"Install Instructions\" button to open modal\n      document.getElementById(\"showInstallInstructionsBtn\").addEventListener(\"click\", showInstallModal);\n\n      // Modal - close on Escape\n      window.addEventListener(\"keydown\", e => {\n        const modal = document.getElementById(\"installModal\");\n        if (e.key === \"Escape\" && modal.style.display === \"flex\") {\n          closeInstallModal();\n        }\n      });\n\n      // Power button refresh\n      const powerBtn = document.getElementById(\"powerBtn\");\n      if (powerBtn) {\n        powerBtn.addEventListener(\"click\", () => {\n          location.reload();\n        });\n      }\n    });\n  </script>\n\n  <style>\n    body {\n      margin: 0;\n      padding: 0;\n      background: url(\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\")\n        no-repeat center center fixed;\n      background-size: cover;\n      font-family: \"Roboto\", sans-serif;\n      color: #fff;\n    }\n    .overlay {\n      background-color: rgba(0, 0, 0, 0.5);\n      padding: 30px;\n      margin: 50px auto;\n      width: 90%;\n      max-width: 600px;\n      border-radius: 10px;\n      text-align: center;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n    }\n    h1 {\n      margin-bottom: 0.3em;\n      font-size: 2em;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n    h2 {\n      margin-top: 0;\n      margin-bottom: 1em;\n      font-size: 1.2em;\n      font-weight: normal;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n\n    /* Base button style */\n    .button-fancy {\n      display: none; /* default hidden, shown by JS or forced */\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      margin: 12px 0; /* vertical spacing */\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: #111;\n      border: 2px solid #0ff;\n      cursor: pointer;\n      box-shadow: 0 0 10px #0ff;\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n      position: relative;\n      overflow: hidden;\n      animation: pulse 2s infinite;\n      font-family: \"Roboto\", sans-serif;\n      user-select: none;\n    }\n    @keyframes pulse {\n      0% {\n        box-shadow: 0 0 10px #0ff;\n      }\n      50% {\n        box-shadow: 0 0 20px #0ff;\n      }\n      100% {\n        box-shadow: 0 0 10px #0ff;\n      }\n    }\n    .button-fancy:hover {\n      box-shadow: 0 0 30px #0ff;\n    }\n    .button-fancy:active {\n      transform: scale(0.95);\n    }\n    .button-fancy:active::after {\n      content: \"\";\n      position: absolute;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: rgba(0, 255, 255, 0.2);\n      animation: ripple 0.6s ease-out;\n      top: 0;\n      left: 0;\n    }\n    @keyframes ripple {\n      from { transform: scale(0); opacity: 1; }\n      to { transform: scale(1.5); opacity: 0; }\n    }\n    .power-icon {\n      width: 60px;\n      height: 60px;\n    }\n    .btn-text {\n      font-size: 16px;\n      color: #0ff;\n      margin-top: 5px;\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n    }\n\n    /* === Pink/red style for install buttons === */\n    #installBtnMobile,\n    #installBtnWindows {\n      border-color: #ff2a68;\n      box-shadow: 0 0 10px #ff2a68;\n      background: #220013;\n      animation: pulsePink 2s infinite;\n    }\n    #installBtnMobile:hover,\n    #installBtnWindows:hover {\n      box-shadow: 0 0 30px #ff2a68;\n    }\n    #installBtnMobile .btn-text,\n    #installBtnWindows .btn-text {\n      color: #ff2a68;\n    }\n    @keyframes pulsePink {\n      0% {\n        box-shadow: 0 0 10px #ff2a68;\n      }\n      50% {\n        box-shadow: 0 0 20px #ff2a68;\n      }\n      100% {\n        box-shadow: 0 0 10px #ff2a68;\n      }\n    }\n\n    /* Neon pink style for Install Instructions button */\n    #showInstallInstructionsBtn {\n      display: inline-flex !important; /* always visible */\n      flex-direction: row;\n      width: 220px;\n      height: 50px;\n      border-radius: 12px;\n      animation: pulsePink 2s infinite;\n      background: #220013;\n      border: 2px solid #ff2a68;\n      box-shadow: 0 0 10px #ff2a68;\n      cursor: pointer;\n      user-select: none;\n      margin-top: 12px;\n      font-family: \"Roboto\", sans-serif;\n      transition: box-shadow 0.3s ease;\n    }\n    #showInstallInstructionsBtn:hover,\n    #showInstallInstructionsBtn:focus {\n      box-shadow: 0 0 30px #ff2a68;\n      outline: none;\n    }\n    #showInstallInstructionsBtn .btn-text {\n      color: #ff2a68;\n      font-size: 16px;\n      margin-top: 0;\n    }\n    #showInstallInstructionsBtn .power-icon {\n      width: 28px;\n      height: 28px;\n      margin-right: 12px;\n      stroke: #ff2a68;\n    }\n\n    /* Modal styles */\n    #installModal {\n      display: none;\n      position: fixed;\n      top: 0; left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0,0,0,0.85);\n      align-items: center;\n      justify-content: center;\n      z-index: 1000;\n      outline: none;\n      padding: 20px;\n      box-sizing: border-box;\n    }\n    #installModal .modal-content {\n      background: #222;\n      padding: 25px 30px;\n      border-radius: 12px;\n      width: 100%;\n      max-width: 450px;\n      max-height: 70vh; /* limit height */\n      overflow-y: auto; /* scroll if content is too tall */\n      color: #fff;\n      font-family: \"Roboto\", sans-serif;\n      box-shadow: 0 0 25px #ff2a68aa;\n      text-align: left;\n    }\n    #installModal h3 {\n      margin-top: 0;\n      margin-bottom: 15px;\n      font-size: 1.6em;\n      color: #ff2a68;\n      text-align: center;\n    }\n    #installModal p {\n      line-height: 1.5em;\n      font-size: 1em;\n      margin-bottom: 25px;\n      font-weight: 500;\n      white-space: normal;\n    }\n    /* Improve formatting: bullet style with margins */\n    #installModal p br + strong {\n      margin-top: 12px;\n      display: block;\n    }\n    #installModal ul {\n      list-style: none;\n      padding-left: 0;\n      margin: 0 0 25px 0;\n    }\n    #installModal ul li {\n      margin-bottom: 1em;\n      line-height: 1.4;\n      font-weight: 500;\n    }\n    #installModal ul li strong {\n      font-weight: 700;\n    }\n\n    #installModal .close-btn {\n      display: block;\n      margin: 0 auto;\n      padding: 12px 28px;\n      background: #ff2a68;\n      color: #fff;\n      border: none;\n      border-radius: 8px;\n      font-size: 16px;\n      cursor: pointer;\n      font-weight: 600;\n      user-select: none;\n      box-shadow: 0 0 12px #ff2a68;\n      transition: background-color 0.3s ease;\n    }\n    #installModal .close-btn:hover,\n    #installModal .close-btn:focus {\n      background: #e12050;\n      outline: none;\n    }\n\n    /* Media Queries for layout and sizes */\n    @media (max-width: 768px) {\n      .overlay {\n        max-width: 90%;\n        padding: 20px;\n      }\n\n      .button-fancy {\n        width: 100px;\n        height: 100px;\n        margin: 14px 0;\n      }\n      .power-icon {\n        width: 50px;\n        height: 50px;\n      }\n      .btn-text {\n        font-size: 14px;\n        margin-top: 6px;\n      }\n      /* Override for Install Instructions button on small */\n      #showInstallInstructionsBtn {\n        width: 100%;\n        height: 50px;\n        border-radius: 10px;\n      }\n    }\n  </style>\n</head>\n<body>\n  <div class=\"overlay\" role=\"main\">\n    <h1>EPIC Power Pack</h1>\n    <h2>Turbocharge your Superpower ðŸš€</h2>\n\n    <!-- INSTALL BUTTON (pink/red, above Power button) -->\n    <button id=\"installBtnMobile\" class=\"button-fancy install-btn\" aria-label=\"Install EPIC Power Pack on mobile devices\" type=\"button\" style=\"display:none;\">\n      <svg class=\"power-icon\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#ff2a68\" stroke-width=\"4\" fill=\"none\" />\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#ff2a68\" stroke-width=\"4\" />\n      </svg>\n      <span class=\"btn-text\">Install</span>\n    </button>\n\n    <button id=\"installBtnWindows\" class=\"button-fancy install-btn\" aria-label=\"Install EPIC Power Pack on desktop devices\" type=\"button\" style=\"display:none;\">\n      <svg class=\"power-icon\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#ff2a68\" stroke-width=\"4\" fill=\"none\" />\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#ff2a68\" stroke-width=\"4\" />\n      </svg>\n      <span class=\"btn-text\">Install</span>\n    </button>\n\n    <!-- POWER BUTTON (below Install) -->\n    <button id=\"powerBtn\" class=\"button-fancy\" aria-label=\"Power button: Refresh Page\" type=\"button\" style=\"display:inline-flex;\">\n      <svg class=\"power-icon\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\" />\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\" />\n      </svg>\n      <span class=\"btn-text\">Power</span>\n    </button>\n\n    <!-- INSTALL INSTRUCTIONS BUTTON (changed neon pink) -->\n    <button id=\"showInstallInstructionsBtn\" class=\"button-fancy\" aria-label=\"Show Install Instructions\" type=\"button\">\n      <svg class=\"power-icon\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\" style=\"stroke-width: 3;\">\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#ff2a68\" fill=\"none\" />\n        <line x1=\"32\" y1=\"14\" x2=\"32\" y2=\"34\" stroke=\"#ff2a68\" />\n        <circle cx=\"32\" cy=\"44\" r=\"4\" fill=\"#ff2a68\" />\n      </svg>\n      <span class=\"btn-text\">Install Instructions</span>\n    </button>\n  </div>\n\n  <!-- INSTALL INSTRUCTIONS MODAL -->\n  <div id=\"installModal\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" aria-hidden=\"true\">\n    <div class=\"modal-content\">\n      <h3>Install Instructions</h3>\n      <p>\n        <strong>Android Chrome / Edge</strong><br>\n        ðŸŸ© (Icon: smartphone with a download arrow or Android phone)<br><br>\n        <strong>Android Chrome/Edge:</strong><br>\n        Tap the browser menu and select <strong>Add to Home screen</strong>.<br><br>\n        <strong>iOS Safari</strong><br>\n        ðŸ“± (Icon: iPhone outline or Safari share icon)<br><br>\n        <strong>iOS Safari:</strong><br>\n        Tap the <strong>Share</strong> icon (the square with an arrow) then tap <strong>Add to Home Screen</strong>.<br><br>\n        <strong>Desktop Browsers</strong><br>\n        ðŸ’» (Icon: desktop monitor)<br><br>\n        <strong>Desktop Browsers:</strong><br>\n        Use the browser menu and select <strong>Install App</strong> or <strong>Add to Desktop</strong> if available.\n      </p>\n      <button id=\"installModalCloseBtn\" class=\"close-btn\" type=\"button\">OK</button>\n    </div>\n  </div>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        460,
        0
      ],
      "id": "0afb8fdb-3b5e-4230-850b-7b211b5e607c",
      "name": "Respond to Webhook1"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>EPIC Power Pack</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n  <meta name=\"theme-color\" content=\"#000000\" />\n\n  <!-- Windows compatibility meta tags -->\n  <meta name=\"msapplication-TileColor\" content=\"#000000\" />\n  <meta name=\"msapplication-TileImage\" content=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\" />\n\n  <!-- Apple-specific meta tags -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\" />\n  <meta name=\"apple-mobile-web-app-title\" content=\"EPIC Power Pack\" />\n  <link rel=\"apple-touch-icon\" href=\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\" />\n\n  <!-- Google Fonts -->\n  <link href=\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\" rel=\"stylesheet\" />\n\n  <script>\n    // Redirect if running standalone PWA (browser or iOS)\n    if (\n      window.matchMedia('(display-mode: standalone)').matches ||\n      window.navigator.standalone === true\n    ) {\n      window.location.href = \"https://xl.epicpc.com/webhook/powerpack?standalone=yes\";\n    }\n  </script>\n\n  <script>\n    let deferredPrompt = null;\n\n    function isIos() {\n      const ua = window.navigator.userAgent.toLowerCase();\n      return /iphone|ipad|ipod/.test(ua);\n    }\n\n    function isInStandaloneMode() {\n      return ('standalone' in window.navigator) && window.navigator.standalone;\n    }\n\n    // Add manifest dynamically\n    const manifestData = {\n      name: \"EPIC Power Pack\",\n      short_name: \"PowerPack\",\n      start_url: \".\",\n      display: \"standalone\",\n      background_color: \"#ffffff\",\n      theme_color: \"#000000\",\n      icons: [\n        {\n          src: \"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\",\n          sizes: \"512x512\",\n          type: \"image/png\"\n        }\n      ]\n    };\n    const manifestBlob = new Blob([JSON.stringify(manifestData)], { type: \"application/json\" });\n    const manifestURL = URL.createObjectURL(manifestBlob);\n    const manifestLink = document.createElement(\"link\");\n    manifestLink.rel = \"manifest\";\n    manifestLink.href = manifestURL;\n    document.head.appendChild(manifestLink);\n\n    window.addEventListener(\"beforeinstallprompt\", (e) => {\n      e.preventDefault();\n      deferredPrompt = e;\n      if (window.innerWidth <= 768) {\n        document.getElementById(\"installBtnMobile\").style.display = \"inline-flex\";\n      } else {\n        document.getElementById(\"installBtnWindows\").style.display = \"inline-flex\";\n      }\n    });\n\n    // Minimal Service Worker\n    if (\"serviceWorker\" in navigator) {\n      const swCode = `\n        self.addEventListener('install', event => {\n          console.log('Service Worker: Installed');\n          self.skipWaiting();\n        });\n        self.addEventListener('activate', event => {\n          console.log('Service Worker: Activated');\n        });\n      `;\n      const blob = new Blob([swCode], { type: \"text/javascript\" });\n      const swURL = URL.createObjectURL(blob);\n      navigator.serviceWorker.register(swURL)\n        .then(reg => console.log(\"Service Worker registered with scope:\", reg.scope))\n        .catch(err => console.error(\"Service Worker registration failed:\", err));\n    }\n\n    function showInstallModal() {\n      const modal = document.getElementById(\"installModal\");\n      modal.style.display = \"flex\";\n      modal.setAttribute(\"aria-hidden\", \"false\");\n      modal.focus();\n    }\n\n    function closeInstallModal() {\n      const modal = document.getElementById(\"installModal\");\n      modal.style.display = \"none\";\n      modal.setAttribute(\"aria-hidden\", \"true\");\n    }\n\n    function installApp() {\n      if (isIos() && !isInStandaloneMode()) {\n        showInstallModal();\n      } else if (deferredPrompt) {\n        deferredPrompt.prompt();\n        deferredPrompt.userChoice.then((choiceResult) => {\n          console.log(\"User response to install prompt:\", choiceResult.outcome);\n          deferredPrompt = null;\n          document.getElementById(\"installBtnMobile\").style.display = \"none\";\n          document.getElementById(\"installBtnWindows\").style.display = \"none\";\n        });\n      }\n    }\n\n    window.addEventListener(\"load\", () => {\n      if (isIos() && !isInStandaloneMode()) {\n        setTimeout(() => {\n          showInstallModal();\n        }, 1000);\n      } else if (deferredPrompt) {\n        if (window.innerWidth <= 768) {\n          document.getElementById(\"installBtnMobile\").style.display = \"inline-flex\";\n        } else {\n          document.getElementById(\"installBtnWindows\").style.display = \"inline-flex\";\n        }\n      }\n    });\n\n    window.addEventListener(\"DOMContentLoaded\", () => {\n      // Attach install buttons\n      document.querySelectorAll(\".button-fancy.install-btn\").forEach(btn => {\n        btn.addEventListener(\"click\", installApp);\n      });\n\n      // Attach modal close\n      document.getElementById(\"installModalCloseBtn\").addEventListener(\"click\", closeInstallModal);\n\n      // Attach \"Install Instructions\" button to open modal\n      document.getElementById(\"showInstallInstructionsBtn\").addEventListener(\"click\", showInstallModal);\n\n      // Modal - close on Escape\n      window.addEventListener(\"keydown\", e => {\n        const modal = document.getElementById(\"installModal\");\n        if (e.key === \"Escape\" && modal.style.display === \"flex\") {\n          closeInstallModal();\n        }\n      });\n\n      // Power button refresh\n      const powerBtn = document.getElementById(\"powerBtn\");\n      if (powerBtn) {\n        powerBtn.addEventListener(\"click\", () => {\n          location.reload();\n        });\n      }\n    });\n  </script>\n\n  <style>\n    body {\n      margin: 0;\n      padding: 0;\n      background: url(\"https://file.cybertech.app/CyberTech/PWA/NIT/icon%3Dpwa-cyberpunk.png\")\n        no-repeat center center fixed;\n      background-size: cover;\n      font-family: \"Roboto\", sans-serif;\n      color: #fff;\n    }\n    .overlay {\n      background-color: rgba(0, 0, 0, 0.5);\n      padding: 30px;\n      margin: 50px auto;\n      width: 90%;\n      max-width: 600px;\n      border-radius: 10px;\n      text-align: center;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n    }\n    h1 {\n      margin-bottom: 0.3em;\n      font-size: 2em;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n    h2 {\n      margin-top: 0;\n      margin-bottom: 1em;\n      font-size: 1.2em;\n      font-weight: normal;\n      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);\n    }\n\n    /* Base button style */\n    .button-fancy {\n      display: none; /* default hidden, shown by JS or forced */\n      flex-direction: column;\n      align-items: center;\n      justify-content: center;\n      margin: 12px 0; /* vertical spacing */\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: #111;\n      border: 2px solid #0ff;\n      cursor: pointer;\n      box-shadow: 0 0 10px #0ff;\n      transition: transform 0.2s ease, box-shadow 0.2s ease;\n      position: relative;\n      overflow: hidden;\n      animation: pulse 2s infinite;\n      font-family: \"Roboto\", sans-serif;\n      user-select: none;\n    }\n    @keyframes pulse {\n      0% {\n        box-shadow: 0 0 10px #0ff;\n      }\n      50% {\n        box-shadow: 0 0 20px #0ff;\n      }\n      100% {\n        box-shadow: 0 0 10px #0ff;\n      }\n    }\n    .button-fancy:hover {\n      box-shadow: 0 0 30px #0ff;\n    }\n    .button-fancy:active {\n      transform: scale(0.95);\n    }\n    .button-fancy:active::after {\n      content: \"\";\n      position: absolute;\n      width: 120px;\n      height: 120px;\n      border-radius: 50%;\n      background: rgba(0, 255, 255, 0.2);\n      animation: ripple 0.6s ease-out;\n      top: 0;\n      left: 0;\n    }\n    @keyframes ripple {\n      from { transform: scale(0); opacity: 1; }\n      to { transform: scale(1.5); opacity: 0; }\n    }\n    .power-icon {\n      width: 60px;\n      height: 60px;\n    }\n    .btn-text {\n      font-size: 16px;\n      color: #0ff;\n      margin-top: 5px;\n      text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);\n    }\n\n    /* === Pink/red style for install buttons === */\n    #installBtnMobile,\n    #installBtnWindows {\n      border-color: #ff2a68;\n      box-shadow: 0 0 10px #ff2a68;\n      background: #220013;\n      animation: pulsePink 2s infinite;\n    }\n    #installBtnMobile:hover,\n    #installBtnWindows:hover {\n      box-shadow: 0 0 30px #ff2a68;\n    }\n    #installBtnMobile .btn-text,\n    #installBtnWindows .btn-text {\n      color: #ff2a68;\n    }\n    @keyframes pulsePink {\n      0% {\n        box-shadow: 0 0 10px #ff2a68;\n      }\n      50% {\n        box-shadow: 0 0 20px #ff2a68;\n      }\n      100% {\n        box-shadow: 0 0 10px #ff2a68;\n      }\n    }\n\n    /* Modal styles */\n    #installModal {\n      display: none;\n      position: fixed;\n      top: 0; left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0,0,0,0.85);\n      align-items: center;\n      justify-content: center;\n      z-index: 1000;\n      outline: none;\n      padding: 20px;\n      box-sizing: border-box;\n    }\n    #installModal .modal-content {\n      background: #222;\n      padding: 25px 30px;\n      border-radius: 12px;\n      max-width: 450px;\n      width: 100%;\n      text-align: left;\n      color: #fff;\n      font-family: \"Roboto\", sans-serif;\n      box-shadow: 0 0 25px #ff2a68aa;\n    }\n    #installModal h3 {\n      margin-top: 0;\n      margin-bottom: 15px;\n      font-size: 1.6em;\n      color: #ff2a68;\n      text-align: center;\n    }\n    #installModal p {\n      white-space: pre-line;\n      line-height: 1.4em;\n      font-size: 1em;\n      margin-bottom: 25px;\n      font-weight: 500;\n    }\n    #installModal .close-btn {\n      display: block;\n      margin: 0 auto;\n      padding: 12px 28px;\n      background: #ff2a68;\n      color: #fff;\n      border: none;\n      border-radius: 8px;\n      font-size: 16px;\n      cursor: pointer;\n      font-weight: 600;\n      user-select: none;\n      box-shadow: 0 0 12px #ff2a68;\n      transition: background-color 0.3s ease;\n    }\n    #installModal .close-btn:hover,\n    #installModal .close-btn:focus {\n      background: #e12050;\n      outline: none;\n    }\n\n    /* Media Queries for layout and sizes */\n    @media (max-width: 768px) {\n      .overlay {\n        max-width: 90%;\n        padding: 20px;\n      }\n\n      .button-fancy {\n        width: 100px;\n        height: 100px;\n        margin: 14px 0;\n      }\n      .power-icon {\n        width: 50px;\n        height: 50px;\n      }\n      .btn-text {\n        font-size: 14px;\n        margin-top: 6px;\n      }\n      #installModal .modal-content {\n        max-width: 90vw;\n      }\n    }\n\n  </style>\n</head>\n<body>\n  <div class=\"overlay\" role=\"main\">\n    <h1>EPIC Power Pack</h1>\n    <h2>Turbocharge your Superpower ðŸš€</h2>\n\n    <!-- INSTALL BUTTON (pink/red, above Power button) -->\n    <button id=\"installBtnMobile\" class=\"button-fancy install-btn\" aria-label=\"Install EPIC Power Pack on mobile devices\" type=\"button\" style=\"display:none;\">\n      <svg class=\"power-icon\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#ff2a68\" stroke-width=\"4\" fill=\"none\" />\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#ff2a68\" stroke-width=\"4\" />\n      </svg>\n      <span class=\"btn-text\">Install</span>\n    </button>\n\n    <button id=\"installBtnWindows\" class=\"button-fancy install-btn\" aria-label=\"Install EPIC Power Pack on desktop devices\" type=\"button\" style=\"display:none;\">\n      <svg class=\"power-icon\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#ff2a68\" stroke-width=\"4\" fill=\"none\" />\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#ff2a68\" stroke-width=\"4\" />\n      </svg>\n      <span class=\"btn-text\">Install</span>\n    </button>\n\n    <!-- POWER BUTTON (below Install) -->\n    <button id=\"powerBtn\" class=\"button-fancy\" aria-label=\"Power button: Refresh Page\" type=\"button\" style=\"display:inline-flex;\">\n      <svg class=\"power-icon\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" stroke-width=\"4\" fill=\"none\" />\n        <line x1=\"32\" y1=\"10\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" stroke-width=\"4\" />\n      </svg>\n      <span class=\"btn-text\">Power</span>\n    </button>\n\n    <!-- INSTALL INSTRUCTIONS BUTTON (below Power) -->\n    <button id=\"showInstallInstructionsBtn\" class=\"button-fancy\" aria-label=\"Show Install Instructions\" type=\"button\" style=\"display:inline-flex; flex-direction: row; width: 220px; height: 50px; border-radius: 12px; animation:none; box-shadow: 0 0 10px #0ff;\">\n      <svg class=\"power-icon\" viewBox=\"0 0 64 64\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\" style=\"stroke-width: 3; width: 28px; height: 28px; margin-right: 12px;\">\n        <circle cx=\"32\" cy=\"32\" r=\"30\" stroke=\"#0ff\" fill=\"none\" />\n        <line x1=\"32\" y1=\"14\" x2=\"32\" y2=\"34\" stroke=\"#0ff\" />\n        <circle cx=\"32\" cy=\"44\" r=\"4\" fill=\"#0ff\" />\n      </svg>\n      <span class=\"btn-text\" style=\"font-size: 16px; color: #0ff; margin-top: 0;\">Install Instructions</span>\n    </button>\n  </div>\n\n  <!-- INSTALL INSTRUCTIONS MODAL -->\n  <div id=\"installModal\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\" aria-hidden=\"true\">\n    <div class=\"modal-content\">\n      <h3>Install Instructions</h3>\n      <p>\n        Android Chrome / Edge<br>\n        ðŸŸ© (Icon: smartphone with a download arrow or Android phone)<br><br>\n\n        Android Chrome/Edge:<br>\n        Tap the browser menu and select <strong>Add to Home screen</strong>.<br><br>\n\n        iOS Safari<br>\n        ðŸ“± (Icon: iPhone outline or Safari share icon)<br><br>\n\n        iOS Safari:<br>\n        Tap the <strong>Share</strong> icon (the square with an arrow) then tap <strong>Add to Home Screen</strong>.<br><br>\n\n        Desktop Browsers<br>\n        ðŸ’» (Icon: desktop monitor)<br><br>\n\n        Desktop Browsers:<br>\n        Use the browser menu and select <strong>Install App</strong> or <strong>Add to Desktop</strong> if available.\n      </p>\n      <button id=\"installModalCloseBtn\" class=\"close-btn\" type=\"button\">OK</button>\n    </div>\n  </div>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        460,
        -140
      ],
      "id": "640da36d-1800-4f8a-b96a-76d4fe5d817f",
      "name": "Respond to Webhook12"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Embedded Iframe with Zoom Disabled</title>\n  <!-- Prevent zooming via meta tag -->\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\">\n  <meta name=\"theme-color\" content=\"#000000\">\n  <!-- Apple-specific meta tags -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\">\n  \n  <style>\n    /* The container fills the viewport and clips any overflow */\n    .iframe-container {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      overflow: hidden;\n    }\n    /* The iframe's intrinsic size is half of the container,\n       then scaled up 2Ã— to fill the space */\n    .iframe-container iframe {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: calc(100% / 1);\n      height: calc(100% / 1);\n      transform: scale(1);\n      transform-origin: top left;\n      border: none;\n    }\n  </style>\n  \n  <script>\n    // Prevent double-tap zoom by intercepting touchend events.\n    let lastTouchEnd = 0;\n    document.addEventListener('touchend', function(event) {\n      const now = Date.now();\n      if (now - lastTouchEnd <= 300) {\n        event.preventDefault();\n      }\n      lastTouchEnd = now;\n    }, false);\n    \n    // Prevent pinch zoom by intercepting touchmove events.\n    document.addEventListener('touchmove', function(event) {\n      if (event.scale && event.scale !== 1) {\n        event.preventDefault();\n      }\n    }, { passive: false });\n  </script>\n</head>\n<body>\n  <div class=\"iframe-container\">\n    <iframe src=\"https://n8n.cybertech.app/webhook/e225c70c-13d2-4902-bef9-977e3207b715\"\n            allow=\"accelerometer; ambient-light-sensor; autoplay; battery; camera; clipboard-read; clipboard-write; encrypted-media; fullscreen; geolocation; gyroscope; magnetometer; microphone; midi; payment; picture-in-picture; usb; xr-spatial-tracking;\">\n    </iframe>\n  </div>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        380,
        -360
      ],
      "id": "f84d6575-0965-42db-9b42-00794b8dcad7",
      "name": "Respond to Webhook13"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Embedded Iframe with Zoom Disabled</title>\n  <!-- Prevent zooming via meta tag -->\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\">\n  <meta name=\"theme-color\" content=\"#000000\">\n  <!-- Apple-specific meta tags -->\n  <meta name=\"apple-mobile-web-app-capable\" content=\"yes\">\n  <meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\">\n  \n  <style>\n    /* The container fills the viewport and clips any overflow */\n    .iframe-container {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100vw;\n      height: 100vh;\n      overflow: hidden;\n    }\n    /* The iframe dimensions */\n    .iframe-container iframe {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      border: none;\n      transform-origin: top left;\n    }\n  </style>\n  \n  <script src=\"https://cdn.jsdelivr.net/npm/keycloak-js@21.1.0/dist/keycloak.min.js\"></script>\n  \n  <script>\n    // Prevent double-tap zoom by intercepting touchend events.\n    let lastTouchEnd = 0;\n    document.addEventListener('touchend', function(event) {\n      const now = Date.now();\n      if (now - lastTouchEnd <= 300) {\n        event.preventDefault();\n      }\n      lastTouchEnd = now;\n    }, false);\n    \n    // Prevent pinch zoom by intercepting touchmove events.\n    document.addEventListener('touchmove', function(event) {\n      if (event.scale && event.scale !== 1) {\n        event.preventDefault();\n      }\n    }, { passive: false });\n\n    // Keycloak config\n    const KEYCLOAK_CONFIG = {\n      url: 'https://keycloak.cybertech.app',\n      realm: 'EPIC',\n      clientId: 'powerpack'\n    };\n\n    const ENTITY = 'e225c70c-13d2-4902-bef9-977e3207b715';\n\n    document.addEventListener('DOMContentLoaded', () => {\n      // Initialize Keycloak instance\n      const keycloak = new Keycloak(KEYCLOAK_CONFIG);\n\n      keycloak.init({ onLoad: 'login-required' }).then(authenticated => {\n        if (!authenticated) {\n          console.error('Failed to authenticate');\n          return;\n        }\n\n        const username = keycloak.tokenParsed?.preferred_username || 'unknown';\n\n        // Construct base URL (you mentioned baseurl + \"?standalone=yes\" + entity + user)\n        // Base URL from original iframe\n        const baseUrl = 'https://n8n.cybertech.app/webhook/' + ENTITY;\n\n        const url = new URL(baseUrl);\n        url.searchParams.set('standalone', 'yes');\n        url.searchParams.set('entity', ENTITY);\n        url.searchParams.set('user', username);\n\n        const iframeSrc = url.toString();\n\n        // Set iframe src dynamically\n        const iframe = document.querySelector('.iframe-container iframe');\n        iframe.src = iframeSrc;\n\n        console.log('Authenticated URL:', iframeSrc);\n      }).catch(err => {\n        console.error('Keycloak init error:', err);\n      });\n    });\n  </script>\n</head>\n<body>\n  <div class=\"iframe-container\">\n    <!-- Initially empty src, set after Keycloak login -->\n    <iframe allow=\"accelerometer; ambient-light-sensor; autoplay; battery; camera; clipboard-read; clipboard-write; encrypted-media; fullscreen; geolocation; gyroscope; magnetometer; microphone; midi; payment; picture-in-picture; usb; xr-spatial-tracking;\">\n    </iframe>\n  </div>\n</body>\n</html>",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.1,
      "position": [
        520,
        -360
      ],
      "id": "ac9567cd-6129-46fe-a2eb-27b273b179f6",
      "name": "Respond to Webhook14"
    }
  ],
  "pinData": {
    "Webhook1": [
      {
        "json": {
          "headers": {
            "host": "n8n.cybertech.app",
            "user-agent": "Mozilla/5.0 (Linux; Android 14; SM-S928U1 Build/UP1A.231005.007; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/134.0.6998.135 Mobile Safari/537.36",
            "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7",
            "accept-encoding": "gzip, br",
            "accept-language": "en-US,en;q=0.9",
            "cdn-loop": "cloudflare; loops=1",
            "cf-connecting-ip": "2607:fb90:8d26:c09f:74a9:c247:95f2:3ba1",
            "cf-ipcountry": "US",
            "cf-ray": "92b8f1927b4d10d0-ORD",
            "cf-visitor": "{\"scheme\":\"https\"}",
            "cf-warp-tag-id": "ec0ac55f-1097-4c49-abf4-678d9d262e3a",
            "connection": "keep-alive",
            "priority": "u=0, i",
            "sec-ch-ua": "\"Chromium\";v=\"134\", \"Not:A-Brand\";v=\"24\", \"Android WebView\";v=\"134\"",
            "sec-ch-ua-mobile": "?1",
            "sec-ch-ua-platform": "\"Android\"",
            "sec-fetch-dest": "document",
            "sec-fetch-mode": "navigate",
            "sec-fetch-site": "none",
            "sec-fetch-user": "?1",
            "upgrade-insecure-requests": "1",
            "x-forwarded-for": "2607:fb90:8d26:c09f:74a9:c247:95f2:3ba1",
            "x-forwarded-proto": "https",
            "x-requested-with": "app.toms.tomsapp"
          },
          "params": {},
          "query": {},
          "body": {},
          "webhookUrl": "https://n8n.cybertech.app/webhook/e225c70c-13d2-4902-bef9-977e3207b715",
          "executionMode": "production"
        }
      }
    ]
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 2,
  "updatedAt": "2025-07-28T20:34:32.999Z",
  "versionId": "1c89a5fb-6722-4584-ba62-906baec4320a"
}